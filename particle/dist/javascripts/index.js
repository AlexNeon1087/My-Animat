define(["exports"],function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function t(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(i,e,h){return e&&t(i.prototype,e),h&&t(i,h),i}}(),h={width:document.body.offsetWidth,height:document.body.offsetHeight,imgSize:void 0,backgroundColor:"#fff",filter:function(t,i,e,h){return!0},x:void 0,y:void 0,r:.5,cols:128,rows:128,mouseRange:60,recovery:.95},s=function(){function t(e,s){i(this,t),Object.assign(this,h,s),this.canvas=document.getElementById(e),this.canvas.style.backgroundColor=this.backgroundColor,this.cxt=this.canvas.getContext("2d"),this.particles=[],this.range=Math.pow(this.mouseRange,2),this.isAnimate=!0,this.init()}return e(t,[{key:"init",value:function(){this.setSize(),this.setImage(this.src)}},{key:"bindEvent",value:function(){this.canvas.addEventListener("mousemove",this.getMousePos.bind(this))}},{key:"getMousePos",value:function(t){this.mx=t.clientX-this.bounds.left,this.my=t.clientY-this.bounds.top}},{key:"setSize",value:function(){this.canvas.width=this.width,this.canvas.height=this.height}},{key:"setImage",value:function(t){var i=this;this.img=new Image,this.img.onload=function(){i.imgSize?(i.img_width=i.imgSize[0],i.img_height=i.imgSize[1],i.x=i.x||(i.width-i.img_width)/2,i.y=i.y||(i.height-i.img_height)/2,i.cxt.drawImage(i.img,i.x,i.y,i.img_width,i.img_height)):(i.img_width=i.img.width,i.img_height=i.img.height,i.x=i.x||(i.width-i.img_width)/2,i.y=i.y||(i.height-i.img_height)/2,i.cxt.drawImage(i.img,i.x,i.y)),i.getParticle(),i.bounds=i.canvas.getBoundingClientRect(),i.bindEvent()},this.img.src=t}},{key:"getParticle",value:function(){for(var t=this.getImageData(),i=parseInt(this.img_width/this.cols),e=parseInt(this.img_height/this.rows),h=0,s=1;s<=this.cols;s++)for(var n=1;n<=this.rows;n++)if(h=n*e*this.img_width+s*i,t[h]&&this.filter&&this.filter.apply(this,t[h])){var a=this.x+s*i+5*(Math.random()-.5),o=this.y+n*e+5*(Math.random()-.5),r={x:a,y:o,ox:a,oy:o,vx:0,vy:0,color:t[h].join(",")};this.particles.push(r)}this.start()}},{key:"getImageData",value:function(){var t=this.cxt.getImageData(this.x,this.y,this.img_width,this.img_height),i=t.data,e=t.data.length,h=[];t.width!==this.img_width&&(this.img_width=t.width),t.height!==this.img_height&&(this.img_height=t.height);for(var s=0;s<e/4;s++)h.push([i[4*s],i[4*s+1],i[4*s+2],i[4*s+3]]);return h}},{key:"start",value:function(){var t=this;this.isAnimate=!0;var i=function e(){return!!t.isAnimate&&(t.render(),t.update(),void requestAnimationFrame(e))};requestAnimationFrame(i)}},{key:"stop",value:function(){this.isAnimate=!1}},{key:"render",value:function(){var t=this;this.cxt.clearRect(0,0,this.width,this.height),Array.from(this.particles,function(i){t.cxt.fillStyle="rgba("+i.color+")",t.cxt.beginPath(),t.cxt.arc(i.x,i.y,t.r,0,2*Math.PI,!0),t.cxt.closePath(),t.cxt.fill()})}},{key:"update",value:function(){var t=this,i=null,e=void 0,h=void 0,s=void 0,n=void 0,a=void 0;Array.from(this.particles,function(o){i=o,e=t.mx-i.x,h=t.my-i.y,s=e*e+h*h,a=-t.range/s,Math.sqrt(s)<t.range&&(n=Math.atan2(h,e),i.vx+=a*Math.cos(n),i.vy+=a*Math.sin(n)),i.vx*=t.recovery,i.vy*=t.recovery,i.x+=i.vx+.25*(i.ox-i.x),i.y+=i.vy+.25*(i.oy-i.y)})}}]),t}();t["default"]=s});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRlZmluZSIsImV4cG9ydHMiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2RlZmF1bHQiLCJ3aWR0aCIsImRvY3VtZW50IiwiYm9keSIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiaW1nU2l6ZSIsInVuZGVmaW5lZCIsImJhY2tncm91bmRDb2xvciIsImZpbHRlciIsInIiLCJnIiwiYiIsImEiLCJ4IiwieSIsImNvbHMiLCJyb3dzIiwibW91c2VSYW5nZSIsInJlY292ZXJ5IiwiUGFydGljbGUiLCJpZCIsIm9wdGlvbiIsInRoaXMiLCJhc3NpZ24iLCJjYW52YXMiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiY3h0IiwiZ2V0Q29udGV4dCIsInBhcnRpY2xlcyIsInJhbmdlIiwiTWF0aCIsInBvdyIsImlzQW5pbWF0ZSIsImluaXQiLCJzZXRTaXplIiwic2V0SW1hZ2UiLCJzcmMiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0TW91c2VQb3MiLCJiaW5kIiwiZSIsIm14IiwiY2xpZW50WCIsImJvdW5kcyIsImxlZnQiLCJteSIsImNsaWVudFkiLCJ0b3AiLCJfdGhpcyIsImltZyIsIkltYWdlIiwib25sb2FkIiwiaW1nX3dpZHRoIiwiaW1nX2hlaWdodCIsImRyYXdJbWFnZSIsImdldFBhcnRpY2xlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYmluZEV2ZW50IiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwic193aWR0aCIsInBhcnNlSW50Iiwic19oZWlnaHQiLCJwb3MiLCJqIiwiYXBwbHkiLCJyYW5kb20iLCJwYXJ0aWNsZSIsIm94Iiwib3kiLCJ2eCIsInZ5IiwiY29sb3IiLCJqb2luIiwicHVzaCIsInN0YXJ0IiwiZGF0YSIsImxlbiIsImFyciIsIl90aGlzMiIsInN0ZXAiLCJyZW5kZXIiLCJ1cGRhdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJfdGhpczMiLCJjbGVhclJlY3QiLCJBcnJheSIsImZyb20iLCJmaWxsU3R5bGUiLCJiZWdpblBhdGgiLCJhcmMiLCJQSSIsImNsb3NlUGF0aCIsImZpbGwiLCJfdGhpczQiLCJwIiwiZHgiLCJkeSIsImQiLCJ0IiwiZiIsInNxcnQiLCJhdGFuMiIsImNvcyIsInNpbiJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVEsV0FBWSxTQUFVQyxHQUE5QixZQU9DLFNBQVNDLEdBQWdCQyxFQUFVQyxHQUNsQyxLQUFNRCxZQUFvQkMsSUFDekIsS0FBTSxJQUFJQyxXQUFVLHFDQU50QkMsT0FBT0MsZUFBZU4sRUFBUyxjQUM5Qk8sT0FBTyxHQVNSLElBQUlDLEdBQWUsV0FDbEIsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQ2pDLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQ3RDLEdBQUlFLEdBQWFILEVBQU1DLEVBQ3ZCRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQ2pERCxFQUFXRSxjQUFlLEVBQ3RCLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FDakRaLE9BQU9DLGVBQWVJLEVBQVFJLEVBQVdJLElBQUtKLElBSWhELE1BQU8sVUFBVVgsRUFBYWdCLEVBQVlDLEdBR3pDLE1BRklELElBQVlWLEVBQWlCTixFQUFZa0IsVUFBV0YsR0FDcERDLEdBQWFYLEVBQWlCTixFQUFhaUIsR0FDeENqQixNQXpCSm1CLEdBQ0xDLE1BQU9DLFNBQVNDLEtBQUtDLFlBQ3JCQyxPQUFRSCxTQUFTQyxLQUFLRyxhQUN0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RUFBRXpCLElBQU13QixFQUFLN0UsU0FDYjhFLEVBQUV4QixJQUFNdUIsRUFBSzdFLFNBQ2I4RSxFQUFFbkYsR0FBS21GLEVBQUV6QixHQUFvQixLQUFkeUIsRUFBRTNCLEdBQUsyQixFQUFFbkYsR0FDeEJtRixFQUFFbEYsR0FBS2tGLEVBQUV4QixHQUFvQixLQUFkd0IsRUFBRTFCLEdBQUswQixFQUFFbEYsU0F3RWxCSyxJQUdSM0MsR0FBQUEsV0E5TW9CMkMiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IF9kZWZhdWx0ID0ge1xuXHR3aWR0aDogZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCwgLy9jYW52YXPnmoTlrr3luqbvvIzpu5jorqTnqpflj6Plrr3luqZcblx0aGVpZ2h0OiBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCwgLy9jYW52YXPnmoTpq5jluqbvvIzpu5jorqTnqpflj6Ppq5jluqZcblx0aW1nU2l6ZTogdW5kZWZpbmVkLCAvL+WbvueJh+eahOWkp+WwjyBbd2lkdGgsIGhlaWdodF3vvIzpu5jorqTljp/lp4vlpKflsI9cblx0YmFja2dyb3VuZENvbG9yOiAnI2ZmZicsXG5cdGZpbHRlcjogZnVuY3Rpb24ociwgZywgYiwgYSkgeyAgLy/ov4fmu6Tmlrnms5Vcblx0XHRyZXR1cm4gdHJ1ZVxuXHR9LFxuXHR4OiB1bmRlZmluZWQsIC8v5Zu+5YOP5ZyoY2FudmFz5Lit55qEeOWdkOagh++8jOm7mOiupOWxheS4rVxuXHR5OiB1bmRlZmluZWQsIC8v5Zu+5YOP5ZyoY2FudmFz5Lit55qEeeWdkOagh++8jOm7mOiupOWxheS4rVxuXHRyOiAwLjUsICAvL+eykuWtkOWNiuW+hFxuXHRjb2xzOiAxMjgsIC8v5Zu+5YOP5YiG5Li65Yeg5YiX77yM5qiq5Z2Q5qCH57uG5bqmXG5cdHJvd3M6IDEyOCwgLy/lm77lg4/liIbkuLrlh6DooYzvvIznurXlnZDmoIfnu4bluqZcblx0bW91c2VSYW5nZTogNjAsICAvL+W9seWTjeiMg+WbtFxuXHRyZWNvdmVyeTogMC45NSAgLy/mgaLlpI3pgJ/luqbvvIzotorlsI/otorlv6vvvIwx5pe25LiN5oGi5aSNXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhcnRpY2xlIHtcblx0Y29uc3RydWN0b3IoaWQsIG9wdGlvbikge1xuXHRcdE9iamVjdC5hc3NpZ24odGhpcywgX2RlZmF1bHQsIG9wdGlvbilcblx0XHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxuXHRcdHRoaXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuYmFja2dyb3VuZENvbG9yXG5cdFx0dGhpcy5jeHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5cdFx0dGhpcy5wYXJ0aWNsZXMgPSBbXVxuXHRcdHRoaXMucmFuZ2UgPSBNYXRoLnBvdyh0aGlzLm1vdXNlUmFuZ2UsIDIpXG5cdFx0dGhpcy5pc0FuaW1hdGUgPSB0cnVlXG5cdFx0dGhpcy5pbml0KClcblx0fVxuXHRpbml0KCkge1xuXHRcdHRoaXMuc2V0U2l6ZSgpXG5cdFx0dGhpcy5zZXRJbWFnZSh0aGlzLnNyYylcblx0fVxuXHRiaW5kRXZlbnQoKSB7XG5cdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5nZXRNb3VzZVBvcy5iaW5kKHRoaXMpKVxuXHR9XG5cdGdldE1vdXNlUG9zKGUpIHtcblx0ICAgIHRoaXMubXggPSBlLmNsaWVudFggLSB0aGlzLmJvdW5kcy5sZWZ0O1xuXHRcdHRoaXMubXkgPSBlLmNsaWVudFkgLSB0aGlzLmJvdW5kcy50b3A7XG5cdH1cblx0c2V0U2l6ZSgpIHtcblx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGhcblx0XHR0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodFxuXHR9XG5cdHNldEltYWdlKHNyYykge1xuXHRcdHRoaXMuaW1nID0gbmV3IEltYWdlKClcblx0XHR0aGlzLmltZy5vbmxvYWQgPSAoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuaW1nU2l6ZSkge1xuXHRcdFx0XHR0aGlzLmltZ193aWR0aCA9IHRoaXMuaW1nLndpZHRoXG5cdFx0XHRcdHRoaXMuaW1nX2hlaWdodCA9IHRoaXMuaW1nLmhlaWdodFxuXHRcdFx0XHR0aGlzLnggPSB0aGlzLnggfHwgKCh0aGlzLndpZHRoIC0gdGhpcy5pbWdfd2lkdGgpIC8gMilcblx0XHRcdFx0dGhpcy55ID0gdGhpcy55IHx8ICgodGhpcy5oZWlnaHQgLSB0aGlzLmltZ19oZWlnaHQpIC8gMilcblx0XHRcdFx0dGhpcy5jeHQuZHJhd0ltYWdlKHRoaXMuaW1nLCB0aGlzLngsIHRoaXMueSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuaW1nX3dpZHRoID0gdGhpcy5pbWdTaXplWzBdXG5cdFx0XHRcdHRoaXMuaW1nX2hlaWdodCA9IHRoaXMuaW1nU2l6ZVsxXVxuXHRcdFx0XHR0aGlzLnggPSB0aGlzLnggfHwgKCh0aGlzLndpZHRoIC0gdGhpcy5pbWdfd2lkdGgpIC8gMilcblx0XHRcdFx0dGhpcy55ID0gdGhpcy55IHx8ICgodGhpcy5oZWlnaHQgLSB0aGlzLmltZ19oZWlnaHQpIC8gMilcblx0XHRcdFx0dGhpcy5jeHQuZHJhd0ltYWdlKHRoaXMuaW1nLCB0aGlzLngsIHRoaXMueSwgdGhpcy5pbWdfd2lkdGgsIHRoaXMuaW1nX2hlaWdodClcblx0XHRcdH1cblx0XHRcdHRoaXMuZ2V0UGFydGljbGUoKVxuXHRcdFx0dGhpcy5ib3VuZHMgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXHRcdFx0dGhpcy5iaW5kRXZlbnQoKVxuXHRcdH1cblx0XHR0aGlzLmltZy5zcmMgPSBzcmNcblx0fVxuXHRnZXRQYXJ0aWNsZSgpIHtcblx0XHRsZXQgaW1hZ2VEYXRhID0gdGhpcy5nZXRJbWFnZURhdGEoKVxuXHRcdGxldCBzX3dpZHRoID0gcGFyc2VJbnQoKHRoaXMuaW1nX3dpZHRoKSAvIHRoaXMuY29scylcblx0XHRsZXQgc19oZWlnaHQgPSBwYXJzZUludCh0aGlzLmltZ19oZWlnaHQgLyB0aGlzLnJvd3MpXG5cdFx0bGV0IHBvcyA9IDBcblx0XHRmb3IgKGxldCBpID0gMTsgaSA8PSB0aGlzLmNvbHM7IGkrKykge1xuXHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPD0gdGhpcy5yb3dzOyBqKyspIHtcblx0XHRcdFx0cG9zID0gKGogKiBzX2hlaWdodCkgKiAodGhpcy5pbWdfd2lkdGgpICsgKGkgKiBzX3dpZHRoKVxuXHRcdFx0XHRpZiAoaW1hZ2VEYXRhW3Bvc10gJiYgdGhpcy5maWx0ZXIgJiYgdGhpcy5maWx0ZXIuYXBwbHkodGhpcywgaW1hZ2VEYXRhW3Bvc10pKSB7XG5cdFx0XHRcdFx0bGV0IHggPSB0aGlzLnggKyBpICogc193aWR0aCArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDVcblx0XHRcdFx0XHRsZXQgeSA9IHRoaXMueSArIGogKiBzX2hlaWdodCArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDVcblx0XHRcdFx0XHRsZXQgcGFydGljbGUgPSB7XG5cdFx0XHRcdFx0XHR4OiB4LFxuXHRcdFx0XHRcdFx0eTogeSxcblx0XHRcdFx0XHRcdG94OiB4LFxuXHRcdFx0XHRcdFx0b3k6IHksXG5cdFx0XHRcdFx0XHR2eDogMCxcblx0XHRcdFx0XHRcdHZ5OiAwLFxuXHRcdFx0XHRcdFx0Y29sb3I6IGltYWdlRGF0YVtwb3NdLmpvaW4oJywnKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLnBhcnRpY2xlcy5wdXNoKHBhcnRpY2xlKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuc3RhcnQoKVxuXHR9XG5cdGdldEltYWdlRGF0YSgpIHtcblx0XHRsZXQgaW1hZ2VEYXRhID0gdGhpcy5jeHQuZ2V0SW1hZ2VEYXRhKHRoaXMueCwgdGhpcy55LCB0aGlzLmltZ193aWR0aCwgdGhpcy5pbWdfaGVpZ2h0KVxuXHRcdGxldCBkYXRhID0gaW1hZ2VEYXRhLmRhdGFcblx0XHRsZXQgbGVuID0gaW1hZ2VEYXRhLmRhdGEubGVuZ3RoXG5cdFx0bGV0IGFyciA9IFtdXG5cdFx0Lypcblx0XHQgKiDov7fkuYvkuI3nm7jnrYnvvJ9cblx0XHQgKi9cblx0XHRpZiAoaW1hZ2VEYXRhLndpZHRoICE9PSB0aGlzLmltZ193aWR0aCkgdGhpcy5pbWdfd2lkdGggPSBpbWFnZURhdGEud2lkdGhcblx0XHRpZiAoaW1hZ2VEYXRhLmhlaWdodCAhPT0gdGhpcy5pbWdfaGVpZ2h0KSB0aGlzLmltZ19oZWlnaHQgPSBpbWFnZURhdGEuaGVpZ2h0XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsZW4gLyA0OyBpKyspIHtcblx0XHRcdGFyci5wdXNoKFtkYXRhW2kgKiA0XSwgZGF0YVtpICogNCArIDFdLCBkYXRhW2kgKiA0ICsgMl0sIGRhdGFbaSAqIDQgKyAzXV0pXG5cdFx0fVxuXHRcdHJldHVybiBhcnJcblx0fVxuXHRzdGFydCgpIHtcblx0XHR0aGlzLmlzQW5pbWF0ZSA9IHRydWVcblx0XHRjb25zdCBzdGVwID0gKCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLmlzQW5pbWF0ZSkgcmV0dXJuIGZhbHNlXG5cdFx0XHR0aGlzLnJlbmRlcigpXG5cdFx0XHR0aGlzLnVwZGF0ZSgpXG5cdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG5cdFx0fVxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcblx0fVxuXHRzdG9wKCkge1xuXHRcdHRoaXMuaXNBbmltYXRlID0gZmFsc2Vcblx0fVxuXHRyZW5kZXIoKSB7XG5cdFx0dGhpcy5jeHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KVxuXHRcdEFycmF5LmZyb20odGhpcy5wYXJ0aWNsZXMsIChwYXJ0aWNsZSkgPT4ge1xuXHRcdFx0dGhpcy5jeHQuZmlsbFN0eWxlID0gJ3JnYmEoJyArIHBhcnRpY2xlLmNvbG9yICsgJyknXG5cblx0XHRcdHRoaXMuY3h0LmJlZ2luUGF0aCgpXG5cdFx0XHR0aGlzLmN4dC5hcmMocGFydGljbGUueCwgcGFydGljbGUueSwgdGhpcy5yLCAwLCAyICogTWF0aC5QSSwgdHJ1ZSlcblx0XHRcdHRoaXMuY3h0LmNsb3NlUGF0aCgpXG5cblx0XHRcdHRoaXMuY3h0LmZpbGwoKVxuXHRcdH0pXG5cdH1cblx0dXBkYXRlKCkge1xuXHRcdGxldCBwID0gbnVsbCxcblx0XHRcdGR4LCBkeSwgZCwgdCwgZlxuXHRcdEFycmF5LmZyb20odGhpcy5wYXJ0aWNsZXMsIChwYXJ0aWNsZSkgPT4ge1xuXHRcdFx0cCA9IHBhcnRpY2xlXG5cdFx0XHRkeCA9IHRoaXMubXggLSBwLnhcblx0XHRcdGR5ID0gdGhpcy5teSAtIHAueVxuXHRcdFx0ZCA9IGR4ICogZHggKyBkeSAqIGR5XG5cdFx0XHRmID0gLXRoaXMucmFuZ2UgLyBkXG5cdFx0XHRpZiAoTWF0aC5zcXJ0KGQpIDwgdGhpcy5yYW5nZSkge1xuXHRcdFx0XHR0ID0gTWF0aC5hdGFuMihkeSwgZHgpXG5cdFx0XHRcdHAudnggKz0gZiAqIE1hdGguY29zKHQpXG5cdFx0XHRcdHAudnkgKz0gZiAqIE1hdGguc2luKHQpXG5cdFx0XHR9XG5cdFx0XHRwLnZ4ICo9IHRoaXMucmVjb3Zlcnlcblx0XHRcdHAudnkgKj0gdGhpcy5yZWNvdmVyeVxuXHRcdFx0cC54ICs9IHAudnggKyAocC5veCAtIHAueCkgKiAwLjI1XG5cdFx0XHRwLnkgKz0gcC52eSArIChwLm95IC0gcC55KSAqIDAuMjVcblx0XHR9KVxuXHR9XG59OyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
