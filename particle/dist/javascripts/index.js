define(["exports"],function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function t(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(i,e,h){return e&&t(i.prototype,e),h&&t(i,h),i}}(),h={width:document.body.offsetWidth,height:document.body.offsetHeight,imgSize:[512,512],filter:function(t,i,e,h){return!0},x:void 0,y:void 0,r:.5,cols:128,rows:128,mouseRange:60,recovery:.95},s=function(){function t(e,s){i(this,t),Object.assign(this,h,s),this.canvas=document.getElementById(e),this.cxt=this.canvas.getContext("2d"),this.particles=[],this.range=Math.pow(this.mouseRange,2),this.bounds=this.canvas.getBoundingClientRect(),this.isAnimate=!0,this.init()}return e(t,[{key:"init",value:function(){this.setSize(),this.bindEvent(),this.setImage(this.src)}},{key:"bindEvent",value:function(){this.canvas.addEventListener("mousemove",this.getMousePos.bind(this))}},{key:"getMousePos",value:function(t){this.mx=t.pageX,this.my=t.pageY}},{key:"setSize",value:function(){this.canvas.width=this.width,this.canvas.height=this.height}},{key:"setImage",value:function(t){var i=this;this.img=new Image,this.img.onload=function(){i.imgSize?(i.img_width=i.imgSize[0],i.img_height=i.imgSize[1],i.x=i.x||(i.width-i.img_width)/2,i.y=i.y||(i.height-i.img_height)/2,i.cxt.drawImage(i.img,i.x,i.y,i.img_width,i.img_height)):(i.img_width=i.img.width,i.img_height=i.img.height,i.x=i.x||(i.width-i.img_width)/2,i.y=i.y||(i.height-i.img_height)/2,i.cxt.drawImage(i.img,i.x,i.y)),i.getParticle()},this.img.src=t}},{key:"getParticle",value:function(){for(var t=this.getImageData(),i=parseInt((this.img_width+1)/this.cols),e=parseInt(this.img_height/this.rows),h=0,s=1;s<=this.cols;s++)for(var a=1;a<=this.rows;a++)if(h=(a*e-1)*this.img_width+s*i,t[h]&&this.filter&&this.filter.apply(this,t[h])){var n=this.x+s*i+5*(Math.random()-.5),r=this.y+a*e+5*(Math.random()-.5),o={x:n,y:r,ox:n,oy:r,vx:0,vy:0,color:t[h].join(",")};this.particles.push(o)}this.start()}},{key:"getImageData",value:function(){var t=this.cxt.getImageData(this.x,this.y,this.img_width,this.img_height),i=t.data,e=t.data.length,h=[];t.width!==this.img_width&&(this.img_width=t.width),t.height!==this.img_height&&(this.img_height=t.height);for(var s=0;s<e/4;s++)h.push([i[4*s],i[4*s+1],i[4*s+2],i[4*s+3]]);return h}},{key:"start",value:function(){var t=this;this.isAnimate=!0;var i=function e(){return!!t.isAnimate&&(t.render(),t.update(),void requestAnimationFrame(e))};requestAnimationFrame(i)}},{key:"stop",value:function(){this.isAnimate=!1}},{key:"render",value:function(){var t=this;this.cxt.clearRect(0,0,this.width,this.height),Array.from(this.particles,function(i){t.cxt.fillStyle="rgba("+i.color+")",t.cxt.beginPath(),t.cxt.arc(i.x,i.y,t.r,0,2*Math.PI,!0),t.cxt.closePath(),t.cxt.fill()})}},{key:"update",value:function(){var t=this,i=null,e=void 0,h=void 0,s=void 0,a=void 0,n=void 0;Array.from(this.particles,function(r){i=r,e=t.mx-i.x,h=t.my-i.y,s=e*e+h*h,n=-t.range/s,s<t.range&&(a=Math.atan2(h,e),i.vx+=n*Math.cos(a),i.vy+=n*Math.sin(a)),i.vx*=t.recovery,i.vy*=t.recovery,i.x+=i.vx+.25*(i.ox-i.x),i.y+=i.vy+.25*(i.oy-i.y)})}}]),t}();t["default"]=s});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRlZmluZSIsImV4cG9ydHMiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2RlZmF1bHQiLCJ3aWR0aCIsImRvY3VtZW50IiwiYm9keSIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiaW1nU2l6ZSIsImZpbHRlciIsInIiLCJnIiwiYiIsImEiLCJ4IiwidW5kZWZpbmVkIiwieSIsImNvbHMiLCJyb3dzIiwibW91c2VSYW5nZSIsInJlY292ZXJ5IiwiUGFydGljbGUiLCJpZCIsIm9wdGlvbiIsInRoaXMiLCJhc3NpZ24iLCJjYW52YXMiLCJnZXRFbGVtZW50QnlJZCIsImN4dCIsImdldENvbnRleHQiLCJwYXJ0aWNsZXMiLCJyYW5nZSIsIk1hdGgiLCJwb3ciLCJib3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJpc0FuaW1hdGUiLCJpbml0Iiwic2V0U2l6ZSIsImJpbmRFdmVudCIsInNldEltYWdlIiwic3JjIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldE1vdXNlUG9zIiwiYmluZCIsImUiLCJteCIsInBhZ2VYIiwibXkiLCJwYWdlWSIsIl90aGlzIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJpbWdfd2lkdGgiLCJpbWdfaGVpZ2h0IiwiZHJhd0ltYWdlIiwiZ2V0UGFydGljbGUiLCJpbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJzX3dpZHRoIiwicGFyc2VJbnQiLCJzX2hlaWdodCIsInBvcyIsImoiLCJhcHBseSIsInJhbmRvbSIsInBhcnRpY2xlIiwib3giLCJveSIsInZ4IiwidnkiLCJjb2xvciIsImpvaW4iLCJwdXNoIiwic3RhcnQiLCJkYXRhIiwibGVuIiwiYXJyIiwiX3RoaXMyIiwic3RlcCIsInJlbmRlciIsInVwZGF0ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl90aGlzMyIsImNsZWFyUmVjdCIsIkFycmF5IiwiZnJvbSIsImZpbGxTdHlsZSIsImJlZ2luUGF0aCIsImFyYyIsIlBJIiwiY2xvc2VQYXRoIiwiZmlsbCIsIl90aGlzNCIsInAiLCJkeCIsImR5IiwiZCIsInQiLCJmIiwiYXRhbjIiLCJjb3MiLCJzaW4iXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRLFdBQVksU0FBVUMsR0FBOUIsWUFPQyxTQUFTQyxHQUFnQkMsRUFBVUMsR0FDbEMsS0FBTUQsWUFBb0JDLElBQ3pCLEtBQU0sSUFBSUMsV0FBVSxxQ0FOdEJDLE9BQU9DLGVBQWVOLEVBQVMsY0FDOUJPLE9BQU8sR0FTUixJQUFJQyxHQUFlLFdBQ2xCLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUNqQyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUN0QyxHQUFJRSxHQUFhSCxFQUFNQyxFQUN2QkUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUNqREQsRUFBV0UsY0FBZSxFQUN0QixTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQ2pEWixPQUFPQyxlQUFlSSxFQUFRSSxFQUFXSSxJQUFLSixJQUloRCxNQUFPLFVBQVVYLEVBQWFnQixFQUFZQyxHQUd6QyxNQUZJRCxJQUFZVixFQUFpQk4sRUFBWWtCLFVBQVdGLEdBQ3BEQyxHQUFhWCxFQUFpQk4sRUFBYWlCLEdBQ3hDakIsTUF6QkptQixHQUNMQyxNQUFPQyxTQUFTQyxLQUFLQyxZQUNyQkMsT0FBUUgsU0FBU0MsS0FBS0csYUFDdEJDLFNBQVUsSUFBSyxLQUNmQyxPQUFRLFNBQVNDLEVBQUdDLEVBQUdDLEVBQUdDLEdB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S0FBZHdCLEVBQUUxQixHQUFLMEIsRUFBRS9FLFNBd0VsQkssSUFHUjFDLEdBQUFBLFdBN01vQjBDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgX2RlZmF1bHQgPSB7XHJcblx0d2lkdGg6IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgsIC8vY2FudmFz55qE5a695bqm77yM6buY6K6k56qX5Y+j5a695bqmXHJcblx0aGVpZ2h0OiBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCwgLy9jYW52YXPnmoTpq5jluqbvvIzpu5jorqTnqpflj6Ppq5jluqZcclxuXHRpbWdTaXplOiBbNTEyLCA1MTJdLCAvL+WbvueJh+eahOWkp+WwjyBbd2lkdGgsIGhlaWdodF3vvIzpu5jorqTljp/lp4vlpKflsI9cclxuXHRmaWx0ZXI6IGZ1bmN0aW9uKHIsIGcsIGIsIGEpIHsgIC8v6L+H5ruk5pa55rOVXHJcblx0XHRyZXR1cm4gdHJ1ZVxyXG5cdH0sXHJcblx0eDogdW5kZWZpbmVkLCAvL+WbvuWDj+WcqGNhbnZhc+S4reeahHjlnZDmoIfvvIzpu5jorqTlsYXkuK1cclxuXHR5OiB1bmRlZmluZWQsIC8v5Zu+5YOP5ZyoY2FudmFz5Lit55qEeeWdkOagh++8jOm7mOiupOWxheS4rVxyXG5cdHI6IDAuNSwgIC8v57KS5a2Q5Y2K5b6EXHJcblx0Y29sczogMTI4LCAvL+WbvuWDj+WIhuS4uuWHoOWIl++8jOaoquWdkOagh+e7huW6plxyXG5cdHJvd3M6IDEyOCwgLy/lm77lg4/liIbkuLrlh6DooYzvvIznurXlnZDmoIfnu4bluqZcclxuXHRtb3VzZVJhbmdlOiA2MCwgIC8v5b2x5ZON6IyD5Zu0XHJcblx0cmVjb3Zlcnk6IDAuOTUgIC8v5oGi5aSN6YCf5bqmXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhcnRpY2xlIHtcclxuXHRjb25zdHJ1Y3RvcihpZCwgb3B0aW9uKSB7XHJcblx0XHRPYmplY3QuYXNzaWduKHRoaXMsIF9kZWZhdWx0LCBvcHRpb24pXHJcblx0XHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxyXG5cdFx0dGhpcy5jeHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcblx0XHR0aGlzLnBhcnRpY2xlcyA9IFtdXHJcblx0XHR0aGlzLnJhbmdlID0gTWF0aC5wb3codGhpcy5tb3VzZVJhbmdlLCAyKVxyXG5cdFx0dGhpcy5ib3VuZHMgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxyXG5cdFx0dGhpcy5pc0FuaW1hdGUgPSB0cnVlXHJcblx0XHR0aGlzLmluaXQoKVxyXG5cdH1cclxuXHRpbml0KCkge1xyXG5cdFx0dGhpcy5zZXRTaXplKClcclxuXHRcdHRoaXMuYmluZEV2ZW50KClcclxuXHRcdHRoaXMuc2V0SW1hZ2UodGhpcy5zcmMpXHJcblx0fVxyXG5cdGJpbmRFdmVudCgpIHtcclxuXHRcdHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuZ2V0TW91c2VQb3MuYmluZCh0aGlzKSlcclxuXHR9XHJcblx0Z2V0TW91c2VQb3MoZSkge1xyXG5cdCAgICB0aGlzLm14ID0gZS5wYWdlWFxyXG5cdCAgICB0aGlzLm15ID0gZS5wYWdlWVxyXG5cdH1cclxuXHRzZXRTaXplKCkge1xyXG5cdFx0dGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoXHJcblx0XHR0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodFxyXG5cdH1cclxuXHRzZXRJbWFnZShzcmMpIHtcclxuXHRcdHRoaXMuaW1nID0gbmV3IEltYWdlKClcclxuXHRcdHRoaXMuaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuXHRcdFx0aWYgKCF0aGlzLmltZ1NpemUpIHtcclxuXHRcdFx0XHR0aGlzLmltZ193aWR0aCA9IHRoaXMuaW1nLndpZHRoXHJcblx0XHRcdFx0dGhpcy5pbWdfaGVpZ2h0ID0gdGhpcy5pbWcuaGVpZ2h0XHJcblx0XHRcdFx0dGhpcy54ID0gdGhpcy54IHx8ICgodGhpcy53aWR0aCAtIHRoaXMuaW1nX3dpZHRoKSAvIDIpXHJcblx0XHRcdFx0dGhpcy55ID0gdGhpcy55IHx8ICgodGhpcy5oZWlnaHQgLSB0aGlzLmltZ19oZWlnaHQpIC8gMilcclxuXHRcdFx0XHR0aGlzLmN4dC5kcmF3SW1hZ2UodGhpcy5pbWcsIHRoaXMueCwgdGhpcy55KVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuaW1nX3dpZHRoID0gdGhpcy5pbWdTaXplWzBdXHJcblx0XHRcdFx0dGhpcy5pbWdfaGVpZ2h0ID0gdGhpcy5pbWdTaXplWzFdXHJcblx0XHRcdFx0dGhpcy54ID0gdGhpcy54IHx8ICgodGhpcy53aWR0aCAtIHRoaXMuaW1nX3dpZHRoKSAvIDIpXHJcblx0XHRcdFx0dGhpcy55ID0gdGhpcy55IHx8ICgodGhpcy5oZWlnaHQgLSB0aGlzLmltZ19oZWlnaHQpIC8gMilcclxuXHRcdFx0XHR0aGlzLmN4dC5kcmF3SW1hZ2UodGhpcy5pbWcsIHRoaXMueCwgdGhpcy55LCB0aGlzLmltZ193aWR0aCwgdGhpcy5pbWdfaGVpZ2h0KVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuZ2V0UGFydGljbGUoKVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5pbWcuc3JjID0gc3JjXHJcblx0fVxyXG5cdGdldFBhcnRpY2xlKCkge1xyXG5cdFx0bGV0IGltYWdlRGF0YSA9IHRoaXMuZ2V0SW1hZ2VEYXRhKClcclxuXHRcdGxldCBzX3dpZHRoID0gcGFyc2VJbnQoKHRoaXMuaW1nX3dpZHRoICsgMSkgLyB0aGlzLmNvbHMpXHJcblx0XHRsZXQgc19oZWlnaHQgPSBwYXJzZUludCh0aGlzLmltZ19oZWlnaHQgLyB0aGlzLnJvd3MpXHJcblx0XHRsZXQgcG9zID0gMFxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gdGhpcy5jb2xzOyBpKyspIHtcclxuXHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPD0gdGhpcy5yb3dzOyBqKyspIHtcclxuXHRcdFx0XHRwb3MgPSAoaiAqIHNfaGVpZ2h0IC0gMSkgKiAodGhpcy5pbWdfd2lkdGgpICsgKGkgKiBzX3dpZHRoKVxyXG5cdFx0XHRcdGlmIChpbWFnZURhdGFbcG9zXSAmJiB0aGlzLmZpbHRlciAmJiB0aGlzLmZpbHRlci5hcHBseSh0aGlzLCBpbWFnZURhdGFbcG9zXSkpIHtcclxuXHRcdFx0XHRcdGxldCB4ID0gdGhpcy54ICsgaSAqIHNfd2lkdGggKyAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiA1XHJcblx0XHRcdFx0XHRsZXQgeSA9IHRoaXMueSArIGogKiBzX2hlaWdodCArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDVcclxuXHRcdFx0XHRcdGxldCBwYXJ0aWNsZSA9IHtcclxuXHRcdFx0XHRcdFx0eDogeCxcclxuXHRcdFx0XHRcdFx0eTogeSxcclxuXHRcdFx0XHRcdFx0b3g6IHgsXHJcblx0XHRcdFx0XHRcdG95OiB5LFxyXG5cdFx0XHRcdFx0XHR2eDogMCxcclxuXHRcdFx0XHRcdFx0dnk6IDAsXHJcblx0XHRcdFx0XHRcdGNvbG9yOiBpbWFnZURhdGFbcG9zXS5qb2luKCcsJylcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRoaXMucGFydGljbGVzLnB1c2gocGFydGljbGUpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLnN0YXJ0KClcclxuXHR9XHJcblx0Z2V0SW1hZ2VEYXRhKCkge1xyXG5cdFx0bGV0IGltYWdlRGF0YSA9IHRoaXMuY3h0LmdldEltYWdlRGF0YSh0aGlzLngsIHRoaXMueSwgdGhpcy5pbWdfd2lkdGgsIHRoaXMuaW1nX2hlaWdodClcclxuXHRcdGxldCBkYXRhID0gaW1hZ2VEYXRhLmRhdGFcclxuXHRcdGxldCBsZW4gPSBpbWFnZURhdGEuZGF0YS5sZW5ndGhcclxuXHRcdGxldCBhcnIgPSBbXVxyXG5cdFx0LypcclxuXHRcdCAqIOi/t+S5i+S4jeebuOetie+8n1xyXG5cdFx0ICovXHJcblx0XHRpZiAoaW1hZ2VEYXRhLndpZHRoICE9PSB0aGlzLmltZ193aWR0aCkgdGhpcy5pbWdfd2lkdGggPSBpbWFnZURhdGEud2lkdGhcclxuXHRcdGlmIChpbWFnZURhdGEuaGVpZ2h0ICE9PSB0aGlzLmltZ19oZWlnaHQpIHRoaXMuaW1nX2hlaWdodCA9IGltYWdlRGF0YS5oZWlnaHRcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuIC8gNDsgaSsrKSB7XHJcblx0XHRcdGFyci5wdXNoKFtkYXRhW2kgKiA0XSwgZGF0YVtpICogNCArIDFdLCBkYXRhW2kgKiA0ICsgMl0sIGRhdGFbaSAqIDQgKyAzXV0pXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gYXJyXHJcblx0fVxyXG5cdHN0YXJ0KCkge1xyXG5cdFx0dGhpcy5pc0FuaW1hdGUgPSB0cnVlXHJcblx0XHRjb25zdCBzdGVwID0gKCkgPT4ge1xyXG5cdFx0XHRpZiAoIXRoaXMuaXNBbmltYXRlKSByZXR1cm4gZmFsc2VcclxuXHRcdFx0dGhpcy5yZW5kZXIoKVxyXG5cdFx0XHR0aGlzLnVwZGF0ZSgpXHJcblx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcclxuXHRcdH1cclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcclxuXHR9XHJcblx0c3RvcCgpIHtcclxuXHRcdHRoaXMuaXNBbmltYXRlID0gZmFsc2VcclxuXHR9XHJcblx0cmVuZGVyKCkge1xyXG5cdFx0dGhpcy5jeHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KVxyXG5cdFx0QXJyYXkuZnJvbSh0aGlzLnBhcnRpY2xlcywgKHBhcnRpY2xlKSA9PiB7XHJcblx0XHRcdHRoaXMuY3h0LmZpbGxTdHlsZSA9ICdyZ2JhKCcgKyBwYXJ0aWNsZS5jb2xvciArICcpJ1xyXG5cclxuXHRcdFx0dGhpcy5jeHQuYmVnaW5QYXRoKClcclxuXHRcdFx0dGhpcy5jeHQuYXJjKHBhcnRpY2xlLngsIHBhcnRpY2xlLnksIHRoaXMuciwgMCwgMiAqIE1hdGguUEksIHRydWUpXHJcblx0XHRcdHRoaXMuY3h0LmNsb3NlUGF0aCgpXHJcblxyXG5cdFx0XHR0aGlzLmN4dC5maWxsKClcclxuXHRcdH0pXHJcblx0fVxyXG5cdHVwZGF0ZSgpIHtcclxuXHRcdGxldCBwID0gbnVsbCxcclxuXHRcdFx0ZHgsIGR5LCBkLCB0LCBmXHJcblx0XHRBcnJheS5mcm9tKHRoaXMucGFydGljbGVzLCAocGFydGljbGUpID0+IHtcclxuXHRcdFx0cCA9IHBhcnRpY2xlXHJcblx0XHRcdGR4ID0gdGhpcy5teCAtIHAueFxyXG5cdFx0XHRkeSA9IHRoaXMubXkgLSBwLnlcclxuXHRcdFx0ZCA9IGR4ICogZHggKyBkeSAqIGR5XHJcblx0XHRcdGYgPSAtdGhpcy5yYW5nZSAvIGRcclxuXHRcdFx0aWYgKGQgPCB0aGlzLnJhbmdlKSB7XHJcblx0XHRcdFx0dCA9IE1hdGguYXRhbjIoZHksIGR4KVxyXG5cdFx0XHRcdHAudnggKz0gZiAqIE1hdGguY29zKHQpXHJcblx0XHRcdFx0cC52eSArPSBmICogTWF0aC5zaW4odClcclxuXHRcdFx0fVxyXG5cdFx0XHRwLnZ4ICo9IHRoaXMucmVjb3ZlcnlcclxuXHRcdFx0cC52eSAqPSB0aGlzLnJlY292ZXJ5XHJcblx0XHRcdHAueCArPSBwLnZ4ICsgKHAub3ggLSBwLngpICogMC4yNVxyXG5cdFx0XHRwLnkgKz0gcC52eSArIChwLm95IC0gcC55KSAqIDAuMjVcclxuXHRcdH0pXHJcblx0fVxyXG59OyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
