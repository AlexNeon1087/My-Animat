define(["exports"],function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function t(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(i,e,h){return e&&t(i.prototype,e),h&&t(i,h),i}}(),h={width:document.body.offsetWidth,height:document.body.offsetHeight,imgSize:[512,512],filter:function(t,i,e,h){return!0},x:void 0,y:void 0,cols:128,rows:128,mouseRange:60,recovery:.95},s=function(){function t(e,s){i(this,t),Object.assign(this,h,s),this.canvas=document.getElementById(e),this.cxt=this.canvas.getContext("2d"),this.particles=[],this.range=Math.pow(this.mouseRange,2),this.bounds=this.canvas.getBoundingClientRect(),this.isAnimate=!0,this.init()}return e(t,[{key:"init",value:function(){this.setSize(),this.bindEvent(),this.setImage(this.src)}},{key:"bindEvent",value:function(){this.canvas.addEventListener("mousemove",this.getMousePos.bind(this))}},{key:"getMousePos",value:function(t){this.mx=t.pageX,this.my=t.pageY}},{key:"setSize",value:function(){this.canvas.width=this.width,this.canvas.height=this.height}},{key:"setImage",value:function(t){var i=this;this.img=new Image,this.img.onload=function(){i.imgSize?(i.img_width=i.imgSize[0],i.img_height=i.imgSize[1],i.x=i.x||(i.width-i.img_width)/2,i.y=i.y||(i.height-i.img_height)/2,i.cxt.drawImage(i.img,i.x,i.y,i.img_width,i.img_height)):(i.img_width=i.img.width,i.img_height=i.img.height,i.x=i.x||(i.width-i.img_width)/2,i.y=i.y||(i.height-i.img_height)/2,i.cxt.drawImage(i.img,i.x,i.y)),i.getParticle()},this.img.src=t}},{key:"getParticle",value:function(){for(var t=this.getImageData(),i=parseInt((this.img_width+1)/this.cols),e=parseInt(this.img_height/this.rows),h=0,s=1;s<=this.cols;s++)for(var a=1;a<=this.rows;a++)if(h=(a*e-1)*this.img_width+s*i,t[h]&&this.filter&&this.filter.apply(this,t[h])){var n=this.x+s*i+5*(Math.random()-.5),r=this.y+a*e+5*(Math.random()-.5),o={x:n,y:r,ox:n,oy:r,vx:0,vy:0,color:t[h].join(",")};this.particles.push(o)}this.start()}},{key:"getImageData",value:function(){var t=this.cxt.getImageData(this.x,this.y,this.img_width,this.img_height),i=t.data,e=t.data.length,h=[];t.width!==this.img_width&&(this.img_width=t.width),t.height!==this.img_height&&(this.img_height=t.height);for(var s=0;s<e/4;s++)h.push([i[4*s],i[4*s+1],i[4*s+2],i[4*s+3]]);return h}},{key:"start",value:function(){var t=this;this.isAnimate=!0;var i=function e(){return!!t.isAnimate&&(t.render(),t.update(),void requestAnimationFrame(e))};requestAnimationFrame(i)}},{key:"stop",value:function(){this.isAnimate=!1}},{key:"render",value:function(){var t=this;this.cxt.clearRect(0,0,this.width,this.height),Array.from(this.particles,function(i){t.cxt.fillStyle="rgba("+i.color+")",t.cxt.beginPath(),t.cxt.arc(i.x,i.y,.5,0,2*Math.PI,!0),t.cxt.closePath(),t.cxt.fill()})}},{key:"update",value:function(){var t=this,i=null,e=void 0,h=void 0,s=void 0,a=void 0,n=void 0;Array.from(this.particles,function(r){i=r,e=t.mx-i.x,h=t.my-i.y,s=e*e+h*h,n=-t.range/s,Math.sqrt(s)<t.range&&(a=Math.atan2(h,e),i.vx+=n*Math.cos(a),i.vy+=n*Math.sin(a)),i.vx*=t.recovery,i.vy*=t.recovery,i.x+=i.vx+.25*(i.ox-i.x),i.y+=i.vy+.25*(i.oy-i.y)})}}]),t}();t["default"]=s});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRlZmluZSIsImV4cG9ydHMiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2RlZmF1bHQiLCJ3aWR0aCIsImRvY3VtZW50IiwiYm9keSIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiaW1nU2l6ZSIsImZpbHRlciIsInIiLCJnIiwiYiIsImEiLCJ4IiwidW5kZWZpbmVkIiwieSIsImNvbHMiLCJyb3dzIiwibW91c2VSYW5nZSIsInJlY292ZXJ5IiwiUGFydGljbGUiLCJpZCIsIm9wdGlvbiIsInRoaXMiLCJhc3NpZ24iLCJjYW52YXMiLCJnZXRFbGVtZW50QnlJZCIsImN4dCIsImdldENvbnRleHQiLCJwYXJ0aWNsZXMiLCJyYW5nZSIsIk1hdGgiLCJwb3ciLCJib3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJpc0FuaW1hdGUiLCJpbml0Iiwic2V0U2l6ZSIsImJpbmRFdmVudCIsInNldEltYWdlIiwic3JjIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldE1vdXNlUG9zIiwiYmluZCIsImUiLCJteCIsInBhZ2VYIiwibXkiLCJwYWdlWSIsIl90aGlzIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJpbWdfd2lkdGgiLCJpbWdfaGVpZ2h0IiwiZHJhd0ltYWdlIiwiZ2V0UGFydGljbGUiLCJpbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJzX3dpZHRoIiwicGFyc2VJbnQiLCJzX2hlaWdodCIsInBvcyIsImoiLCJhcHBseSIsInJhbmRvbSIsInBhcnRpY2xlIiwib3giLCJveSIsInZ4IiwidnkiLCJjb2xvciIsImpvaW4iLCJwdXNoIiwic3RhcnQiLCJkYXRhIiwibGVuIiwiYXJyIiwiX3RoaXMyIiwic3RlcCIsInJlbmRlciIsInVwZGF0ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl90aGlzMyIsImNsZWFyUmVjdCIsIkFycmF5IiwiZnJvbSIsImZpbGxTdHlsZSIsImJlZ2luUGF0aCIsImFyYyIsIlBJIiwiY2xvc2VQYXRoIiwiZmlsbCIsIl90aGlzNCIsInAiLCJkeCIsImR5IiwiZCIsInQiLCJmIiwic3FydCIsImF0YW4yIiwiY29zIiwic2luIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUSxXQUFZLFNBQVVDLEdBQTlCLFlBT0MsU0FBU0MsR0FBZ0JDLEVBQVVDLEdBQ2xDLEtBQU1ELFlBQW9CQyxJQUN6QixLQUFNLElBQUlDLFdBQVUscUNBTnRCQyxPQUFPQyxlQUFlTixFQUFTLGNBQzlCTyxPQUFPLEdBU1IsSUFBSUMsR0FBZSxXQUNsQixRQUFTQyxHQUFpQkMsRUFBUUMsR0FDakMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FDdEMsR0FBSUUsR0FBYUgsRUFBTUMsRUFDdkJFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFDakRELEVBQVdFLGNBQWUsRUFDdEIsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUNqRFosT0FBT0MsZUFBZUksRUFBUUksRUFBV0ksSUFBS0osSUFJaEQsTUFBTyxVQUFVWCxFQUFhZ0IsRUFBWUMsR0FHekMsTUFGSUQsSUFBWVYsRUFBaUJOLEVBQVlrQixVQUFXRixHQUNwREMsR0FBYVgsRUFBaUJOLEVBQWFpQixHQUN4Q2pCLE1BekJKbUIsR0FDTEMsTUFBT0MsU0FBU0MsS0FBS0MsWUFDckJDLE9BQVFILFNBQVNDLEtBQUtHLGFBQ3RCQyxTQUFVLElBQUssS0FDZkMsT0FBUSxTQUFTQyxFQUFHQyxFQUFHQyxF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QixLQUFkd0IsRUFBRTFCLEdBQUswQixFQUFFL0UsU0F3RWxCSyxJQUdSMUMsR0FBQUEsV0E3TW9CMEMiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBfZGVmYXVsdCA9IHtcclxuXHR3aWR0aDogZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCwgLy9jYW52YXPnmoTlrr3luqbvvIzpu5jorqTnqpflj6Plrr3luqZcclxuXHRoZWlnaHQ6IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0LCAvL2NhbnZhc+eahOmrmOW6pu+8jOm7mOiupOeql+WPo+mrmOW6plxyXG5cdGltZ1NpemU6IFs1MTIsIDUxMl0sIC8v5Zu+54mH55qE5aSn5bCPIFt3aWR0aCwgaGVpZ2h0Xe+8jOm7mOiupOWOn+Wni+Wkp+Wwj1xyXG5cdGZpbHRlcjogZnVuY3Rpb24ociwgZywgYiwgYSkgeyAgLy/ov4fmu6Tmlrnms5VcclxuXHRcdHJldHVybiB0cnVlXHJcblx0fSxcclxuXHR4OiB1bmRlZmluZWQsIC8v5Zu+5YOP5ZyoY2FudmFz5Lit55qEeOWdkOagh++8jOm7mOiupOWxheS4rVxyXG5cdHk6IHVuZGVmaW5lZCwgLy/lm77lg4/lnKhjYW52YXPkuK3nmoR55Z2Q5qCH77yM6buY6K6k5bGF5LitXHJcblx0Y29sczogMTI4LCAvL+WbvuWDj+WIhuS4uuWHoOWIl++8jOaoquWdkOagh+e7huW6plxyXG5cdHJvd3M6IDEyOCwgLy/lm77lg4/liIbkuLrlh6DooYzvvIznurXlnZDmoIfnu4bluqZcclxuXHRtb3VzZVJhbmdlOiA2MCwgIC8v5b2x5ZON6IyD5Zu0XHJcblx0cmVjb3Zlcnk6IDAuOTUgIC8v5oGi5aSN6YCf5bqmXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhcnRpY2xlIHtcclxuXHRjb25zdHJ1Y3RvcihpZCwgb3B0aW9uKSB7XHJcblx0XHRPYmplY3QuYXNzaWduKHRoaXMsIF9kZWZhdWx0LCBvcHRpb24pXHJcblx0XHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxyXG5cdFx0dGhpcy5jeHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcblx0XHR0aGlzLnBhcnRpY2xlcyA9IFtdXHJcblx0XHR0aGlzLnJhbmdlID0gTWF0aC5wb3codGhpcy5tb3VzZVJhbmdlLCAyKVxyXG5cdFx0dGhpcy5ib3VuZHMgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxyXG5cdFx0dGhpcy5pc0FuaW1hdGUgPSB0cnVlXHJcblx0XHR0aGlzLmluaXQoKVxyXG5cdH1cclxuXHRpbml0KCkge1xyXG5cdFx0dGhpcy5zZXRTaXplKClcclxuXHRcdHRoaXMuYmluZEV2ZW50KClcclxuXHRcdHRoaXMuc2V0SW1hZ2UodGhpcy5zcmMpXHJcblx0fVxyXG5cdGJpbmRFdmVudCgpIHtcclxuXHRcdHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuZ2V0TW91c2VQb3MuYmluZCh0aGlzKSlcclxuXHR9XHJcblx0Z2V0TW91c2VQb3MoZSkge1xyXG5cdCAgICB0aGlzLm14ID0gZS5wYWdlWFxyXG5cdCAgICB0aGlzLm15ID0gZS5wYWdlWVxyXG5cdH1cclxuXHRzZXRTaXplKCkge1xyXG5cdFx0dGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoXHJcblx0XHR0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodFxyXG5cdH1cclxuXHRzZXRJbWFnZShzcmMpIHtcclxuXHRcdHRoaXMuaW1nID0gbmV3IEltYWdlKClcclxuXHRcdHRoaXMuaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuXHRcdFx0aWYgKCF0aGlzLmltZ1NpemUpIHtcclxuXHRcdFx0XHR0aGlzLmltZ193aWR0aCA9IHRoaXMuaW1nLndpZHRoXHJcblx0XHRcdFx0dGhpcy5pbWdfaGVpZ2h0ID0gdGhpcy5pbWcuaGVpZ2h0XHJcblx0XHRcdFx0dGhpcy54ID0gdGhpcy54IHx8ICgodGhpcy53aWR0aCAtIHRoaXMuaW1nX3dpZHRoKSAvIDIpXHJcblx0XHRcdFx0dGhpcy55ID0gdGhpcy55IHx8ICgodGhpcy5oZWlnaHQgLSB0aGlzLmltZ19oZWlnaHQpIC8gMilcclxuXHRcdFx0XHR0aGlzLmN4dC5kcmF3SW1hZ2UodGhpcy5pbWcsIHRoaXMueCwgdGhpcy55KVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuaW1nX3dpZHRoID0gdGhpcy5pbWdTaXplWzBdXHJcblx0XHRcdFx0dGhpcy5pbWdfaGVpZ2h0ID0gdGhpcy5pbWdTaXplWzFdXHJcblx0XHRcdFx0dGhpcy54ID0gdGhpcy54IHx8ICgodGhpcy53aWR0aCAtIHRoaXMuaW1nX3dpZHRoKSAvIDIpXHJcblx0XHRcdFx0dGhpcy55ID0gdGhpcy55IHx8ICgodGhpcy5oZWlnaHQgLSB0aGlzLmltZ19oZWlnaHQpIC8gMilcclxuXHRcdFx0XHR0aGlzLmN4dC5kcmF3SW1hZ2UodGhpcy5pbWcsIHRoaXMueCwgdGhpcy55LCB0aGlzLmltZ193aWR0aCwgdGhpcy5pbWdfaGVpZ2h0KVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuZ2V0UGFydGljbGUoKVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5pbWcuc3JjID0gc3JjXHJcblx0fVxyXG5cdGdldFBhcnRpY2xlKCkge1xyXG5cdFx0bGV0IGltYWdlRGF0YSA9IHRoaXMuZ2V0SW1hZ2VEYXRhKClcclxuXHRcdGxldCBzX3dpZHRoID0gcGFyc2VJbnQoKHRoaXMuaW1nX3dpZHRoICsgMSkgLyB0aGlzLmNvbHMpXHJcblx0XHRsZXQgc19oZWlnaHQgPSBwYXJzZUludCh0aGlzLmltZ19oZWlnaHQgLyB0aGlzLnJvd3MpXHJcblx0XHRsZXQgcG9zID0gMFxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gdGhpcy5jb2xzOyBpKyspIHtcclxuXHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPD0gdGhpcy5yb3dzOyBqKyspIHtcclxuXHRcdFx0XHRwb3MgPSAoaiAqIHNfaGVpZ2h0IC0gMSkgKiAodGhpcy5pbWdfd2lkdGgpICsgKGkgKiBzX3dpZHRoKVxyXG5cdFx0XHRcdGlmIChpbWFnZURhdGFbcG9zXSAmJiB0aGlzLmZpbHRlciAmJiB0aGlzLmZpbHRlci5hcHBseSh0aGlzLCBpbWFnZURhdGFbcG9zXSkpIHtcclxuXHRcdFx0XHRcdGxldCB4ID0gdGhpcy54ICsgaSAqIHNfd2lkdGggKyAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiA1XHJcblx0XHRcdFx0XHRsZXQgeSA9IHRoaXMueSArIGogKiBzX2hlaWdodCArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDVcclxuXHRcdFx0XHRcdGxldCBwYXJ0aWNsZSA9IHtcclxuXHRcdFx0XHRcdFx0eDogeCxcclxuXHRcdFx0XHRcdFx0eTogeSxcclxuXHRcdFx0XHRcdFx0b3g6IHgsXHJcblx0XHRcdFx0XHRcdG95OiB5LFxyXG5cdFx0XHRcdFx0XHR2eDogMCxcclxuXHRcdFx0XHRcdFx0dnk6IDAsXHJcblx0XHRcdFx0XHRcdGNvbG9yOiBpbWFnZURhdGFbcG9zXS5qb2luKCcsJylcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRoaXMucGFydGljbGVzLnB1c2gocGFydGljbGUpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLnN0YXJ0KClcclxuXHR9XHJcblx0Z2V0SW1hZ2VEYXRhKCkge1xyXG5cdFx0bGV0IGltYWdlRGF0YSA9IHRoaXMuY3h0LmdldEltYWdlRGF0YSh0aGlzLngsIHRoaXMueSwgdGhpcy5pbWdfd2lkdGgsIHRoaXMuaW1nX2hlaWdodClcclxuXHRcdGxldCBkYXRhID0gaW1hZ2VEYXRhLmRhdGFcclxuXHRcdGxldCBsZW4gPSBpbWFnZURhdGEuZGF0YS5sZW5ndGhcclxuXHRcdGxldCBhcnIgPSBbXVxyXG5cdFx0LypcclxuXHRcdCAqIOi/t+S5i+S4jeebuOetie+8n1xyXG5cdFx0ICovXHJcblx0XHRpZiAoaW1hZ2VEYXRhLndpZHRoICE9PSB0aGlzLmltZ193aWR0aCkgdGhpcy5pbWdfd2lkdGggPSBpbWFnZURhdGEud2lkdGhcclxuXHRcdGlmIChpbWFnZURhdGEuaGVpZ2h0ICE9PSB0aGlzLmltZ19oZWlnaHQpIHRoaXMuaW1nX2hlaWdodCA9IGltYWdlRGF0YS5oZWlnaHRcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuIC8gNDsgaSsrKSB7XHJcblx0XHRcdGFyci5wdXNoKFtkYXRhW2kgKiA0XSwgZGF0YVtpICogNCArIDFdLCBkYXRhW2kgKiA0ICsgMl0sIGRhdGFbaSAqIDQgKyAzXV0pXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gYXJyXHJcblx0fVxyXG5cdHN0YXJ0KCkge1xyXG5cdFx0dGhpcy5pc0FuaW1hdGUgPSB0cnVlXHJcblx0XHRjb25zdCBzdGVwID0gKCkgPT4ge1xyXG5cdFx0XHRpZiAoIXRoaXMuaXNBbmltYXRlKSByZXR1cm4gZmFsc2VcclxuXHRcdFx0dGhpcy5yZW5kZXIoKVxyXG5cdFx0XHR0aGlzLnVwZGF0ZSgpXHJcblx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcclxuXHRcdH1cclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcclxuXHR9XHJcblx0c3RvcCgpIHtcclxuXHRcdHRoaXMuaXNBbmltYXRlID0gZmFsc2VcclxuXHR9XHJcblx0cmVuZGVyKCkge1xyXG5cdFx0dGhpcy5jeHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KVxyXG5cdFx0QXJyYXkuZnJvbSh0aGlzLnBhcnRpY2xlcywgKHBhcnRpY2xlKSA9PiB7XHJcblx0XHRcdHRoaXMuY3h0LmZpbGxTdHlsZSA9ICdyZ2JhKCcgKyBwYXJ0aWNsZS5jb2xvciArICcpJ1xyXG5cclxuXHRcdFx0dGhpcy5jeHQuYmVnaW5QYXRoKClcclxuXHRcdFx0dGhpcy5jeHQuYXJjKHBhcnRpY2xlLngsIHBhcnRpY2xlLnksIC41LCAwLCAyICogTWF0aC5QSSwgdHJ1ZSlcclxuXHRcdFx0dGhpcy5jeHQuY2xvc2VQYXRoKClcclxuXHJcblx0XHRcdHRoaXMuY3h0LmZpbGwoKVxyXG5cdFx0fSlcclxuXHR9XHJcblx0dXBkYXRlKCkge1xyXG5cdFx0bGV0IHAgPSBudWxsLFxyXG5cdFx0XHRkeCwgZHksIGQsIHQsIGZcclxuXHRcdEFycmF5LmZyb20odGhpcy5wYXJ0aWNsZXMsIChwYXJ0aWNsZSkgPT4ge1xyXG5cdFx0XHRwID0gcGFydGljbGVcclxuXHRcdFx0ZHggPSB0aGlzLm14IC0gcC54XHJcblx0XHRcdGR5ID0gdGhpcy5teSAtIHAueVxyXG5cdFx0XHRkID0gZHggKiBkeCArIGR5ICogZHlcclxuXHRcdFx0ZiA9IC10aGlzLnJhbmdlIC8gZFxyXG5cdFx0XHRpZiAoTWF0aC5zcXJ0KGQpIDwgdGhpcy5yYW5nZSkge1xyXG5cdFx0XHRcdHQgPSBNYXRoLmF0YW4yKGR5LCBkeClcclxuXHRcdFx0XHRwLnZ4ICs9IGYgKiBNYXRoLmNvcyh0KVxyXG5cdFx0XHRcdHAudnkgKz0gZiAqIE1hdGguc2luKHQpXHJcblx0XHRcdH1cclxuXHRcdFx0cC52eCAqPSB0aGlzLnJlY292ZXJ5XHJcblx0XHRcdHAudnkgKj0gdGhpcy5yZWNvdmVyeVxyXG5cdFx0XHRwLnggKz0gcC52eCArIChwLm94IC0gcC54KSAqIDAuMjVcclxuXHRcdFx0cC55ICs9IHAudnkgKyAocC5veSAtIHAueSkgKiAwLjI1XHJcblx0XHR9KVxyXG5cdH1cclxufTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
