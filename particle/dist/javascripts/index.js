define(["exports"],function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function t(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(i,e,h){return e&&t(i.prototype,e),h&&t(i,h),i}}(),h={src:"",width:document.body.offsetWidth,height:document.body.offsetHeight,imgSize:void 0,filter:function(t,i,e,h){return!0},x:void 0,y:void 0,r:.5,cols:150,rows:150,mouseRange:60,disperse:5,recovery:.95},s=function(){function t(e,s){i(this,t),Object.assign(this,h,s),this.canvas=document.getElementById(e),this.cxt=this.canvas.getContext("2d"),this.particles=[],this.isAnimate=!0,this.init()}return e(t,[{key:"init",value:function(){this.setSize(),this.setImage(this.src)}},{key:"destory",value:function(){this.cxt.clearRect(0,0,this.width,this.height),this.particles.length=0,this.stop()}},{key:"bindEvent",value:function(){this.canvas.addEventListener("mousemove",this.getMousePos.bind(this))}},{key:"getMousePos",value:function(t){this.mx=t.clientX-this.bounds.left,this.my=t.clientY-this.bounds.top}},{key:"setSize",value:function(){this.canvas.width=this.width,this.canvas.height=this.height}},{key:"setImage",value:function(t){var i=this;this.img=new Image,this.img.onload=function(){i.imgSize?(i.img_width=i.imgSize[0],i.img_height=i.imgSize[1],i.x=i.x||(i.width-i.img_width)/2,i.y=i.y||(i.height-i.img_height)/2,i.cxt.drawImage(i.img,i.x,i.y,i.img_width,i.img_height)):(i.img_width=i.img.width,i.img_height=i.img.height,i.x=i.x||(i.width-i.img_width)/2,i.y=i.y||(i.height-i.img_height)/2,i.cxt.drawImage(i.img,i.x,i.y)),i.getParticle(),i.bounds=i.canvas.getBoundingClientRect(),i.bindEvent()},this.img.src=t}},{key:"getParticle",value:function(){for(var t=this.getImageData(),i=parseInt(this.img_width/this.cols),e=parseInt(this.img_height/this.rows),h=0,s=1;s<=this.cols;s++)for(var n=1;n<=this.rows;n++)if(h=n*e*this.img_width+s*i,t[h]&&this.filter&&this.filter.apply(this,t[h])){var a=this.x+s*i+(Math.random()-.5)*this.disperse,o=this.y+n*e+(Math.random()-.5)*this.disperse,r={x:a,y:o,ox:a,oy:o,vx:0,vy:0,color:t[h].join(",")};this.particles.push(r)}this.start()}},{key:"getImageData",value:function(){var t=this.cxt.getImageData(this.x,this.y,this.img_width,this.img_height),i=t.data,e=t.data.length,h=[];t.width!==this.img_width&&(this.img_width=t.width),t.height!==this.img_height&&(this.img_height=t.height);for(var s=0;s<e/4;s++)h.push([i[4*s],i[4*s+1],i[4*s+2],i[4*s+3]]);return h}},{key:"start",value:function(){var t=this;this.isAnimate=!0;var i=function e(){return!!t.isAnimate&&(t.render(),t.update(),void requestAnimationFrame(e))};requestAnimationFrame(i)}},{key:"stop",value:function(){this.isAnimate=!1}},{key:"render",value:function(){var t=this;this.cxt.clearRect(0,0,this.width,this.height),Array.from(this.particles,function(i){t.cxt.fillStyle="rgba("+i.color+")",t.cxt.beginPath(),t.cxt.arc(i.x,i.y,t.r,0,2*Math.PI,!0),t.cxt.closePath(),t.cxt.fill()})}},{key:"update",value:function(){var t=this,i=Math.pow(this.mouseRange,2),e=null,h=void 0,s=void 0,n=void 0,a=void 0,o=void 0;Array.from(this.particles,function(r){e=r,h=t.mx-e.x,s=t.my-e.y,n=h*h+s*s,o=-i/n,Math.sqrt(n)<i&&(a=Math.atan2(s,h),e.vx+=o*Math.cos(a),e.vy+=o*Math.sin(a)),e.vx*=t.recovery,e.vy*=t.recovery,e.x+=e.vx+.25*(e.ox-e.x),e.y+=e.vy+.25*(e.oy-e.y)})}}]),t}();t["default"]=s});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRlZmluZSIsImV4cG9ydHMiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2RlZmF1bHQiLCJzcmMiLCJ3aWR0aCIsImRvY3VtZW50IiwiYm9keSIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiaW1nU2l6ZSIsInVuZGVmaW5lZCIsImZpbHRlciIsInIiLCJnIiwiYiIsImEiLCJ4IiwieSIsImNvbHMiLCJyb3dzIiwibW91c2VSYW5nZSIsImRpc3BlcnNlIiwicmVjb3ZlcnkiLCJQYXJ0aWNsZSIsImlkIiwib3B0aW9uIiwidGhpcyIsImFzc2lnbiIsImNhbnZhcyIsImdldEVsZW1lbnRCeUlkIiwiY3h0IiwiZ2V0Q29udGV4dCIsInBhcnRpY2xlcyIsImlzQW5pbWF0ZSIsImluaXQiLCJzZXRTaXplIiwic2V0SW1hZ2UiLCJjbGVhclJlY3QiLCJzdG9wIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldE1vdXNlUG9zIiwiYmluZCIsImUiLCJteCIsImNsaWVudFgiLCJib3VuZHMiLCJsZWZ0IiwibXkiLCJjbGllbnRZIiwidG9wIiwiX3RoaXMiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsImltZ193aWR0aCIsImltZ19oZWlnaHQiLCJkcmF3SW1hZ2UiLCJnZXRQYXJ0aWNsZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJpbmRFdmVudCIsImltYWdlRGF0YSIsImdldEltYWdlRGF0YSIsInNfd2lkdGgiLCJwYXJzZUludCIsInNfaGVpZ2h0IiwicG9zIiwiaiIsImFwcGx5IiwiTWF0aCIsInJhbmRvbSIsInBhcnRpY2xlIiwib3giLCJveSIsInZ4IiwidnkiLCJjb2xvciIsImpvaW4iLCJwdXNoIiwic3RhcnQiLCJkYXRhIiwibGVuIiwiYXJyIiwiX3RoaXMyIiwic3RlcCIsInJlbmRlciIsInVwZGF0ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl90aGlzMyIsIkFycmF5IiwiZnJvbSIsImZpbGxTdHlsZSIsImJlZ2luUGF0aCIsImFyYyIsIlBJIiwiY2xvc2VQYXRoIiwiZmlsbCIsIl90aGlzNCIsInJhbmdlIiwicG93IiwicCIsImR4IiwiZHkiLCJkIiwidCIsImYiLCJzcXJ0IiwiYXRhbjIiLCJjb3MiLCJzaW4iXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRLFdBQVksU0FBVUMsR0FBOUIsWUFPQyxTQUFTQyxHQUFnQkMsRUFBVUMsR0FDbEMsS0FBTUQsWUFBb0JDLElBQ3pCLEtBQU0sSUFBSUMsV0FBVSxxQ0FOdEJDLE9BQU9DLGVBQWVOLEVBQVMsY0FDOUJPLE9BQU8sR0FTUixJQUFJQyxHQUFlLFdBQ2xCLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUNqQyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUN0QyxHQUFJRSxHQUFhSCxFQUFNQyxFQUN2QkUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUNqREQsRUFBV0UsY0FBZSxFQUN0QixTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQ2pEWixPQUFPQyxlQUFlSSxFQUFRSSxFQUFXSSxJQUFLSixJQUloRCxNQUFPLFVBQVVYLEVBQWFnQixFQUFZQyxHQUd6QyxNQUZJRCxJQUFZVixFQUFpQk4sRUFBWWtCLFVBQVdGLEdBQ3BEQyxHQUFhWCxFQUFpQk4sRUFBYWlCLEdBQ3hDakIsTUF6QkptQixHQUNMQyxJQUFLLEdBQ0xDLE1BQU9DLFNBQVNDLEtBQUtDLFlBQ3JCQyxPQUFRSCxTQUFTQyxLQUFLRyxh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LEVBQUlwQyxLQUFLdUMsSUFBSUosR0FDckJKLEVBQUV6QixJQUFNOEIsRUFBSXBDLEtBQUt3QyxJQUFJTCxJQUV0QkosRUFBRTFCLElBQU11QixFQUFLMUUsU0FDYjZFLEVBQUV6QixJQUFNc0IsRUFBSzFFLFNBQ2I2RSxFQUFFbkYsR0FBS21GLEVBQUUxQixHQUFvQixLQUFkMEIsRUFBRTVCLEdBQUs0QixFQUFFbkYsR0FDeEJtRixFQUFFbEYsR0FBS2tGLEVBQUV6QixHQUFvQixLQUFkeUIsRUFBRTNCLEdBQUsyQixFQUFFbEYsU0EwRWxCTSxJQUdSNUMsR0FBQUEsV0F0T29CNEMiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBfZGVmYXVsdCA9IHtcclxuXHRzcmM6ICcnLCAvL+WbvueJh+i3r+W+hFxyXG5cdHdpZHRoOiBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoLCAvL2NhbnZhc+eahOWuveW6pu+8jOm7mOiupOeql+WPo+WuveW6plxyXG5cdGhlaWdodDogZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsIC8vY2FudmFz55qE6auY5bqm77yM6buY6K6k56qX5Y+j6auY5bqmXHJcblx0aW1nU2l6ZTogdW5kZWZpbmVkLCAvL+WbvueJh+eahOWkp+WwjyBbd2lkdGgsIGhlaWdodF3vvIzpu5jorqTljp/lp4vlpKflsI9cclxuXHRmaWx0ZXI6IGZ1bmN0aW9uKHIsIGcsIGIsIGEpIHsgIC8v6L+H5ruk5pa55rOVXHJcblx0XHRyZXR1cm4gdHJ1ZVxyXG5cdH0sXHJcblx0eDogdW5kZWZpbmVkLCAvL+WbvuWDj+WcqGNhbnZhc+S4reeahHjlnZDmoIfvvIzpu5jorqTlsYXkuK1cclxuXHR5OiB1bmRlZmluZWQsIC8v5Zu+5YOP5ZyoY2FudmFz5Lit55qEeeWdkOagh++8jOm7mOiupOWxheS4rVxyXG5cdHI6IDAuNSwgIC8v57KS5a2Q5Y2K5b6EXHJcblx0Y29sczogMTUwLCAvL+WbvuWDj+WIhuS4uuWHoOWIl++8jOaoquWdkOagh+e7huW6plxyXG5cdHJvd3M6IDE1MCwgLy/lm77lg4/liIbkuLrlh6DooYzvvIznurXlnZDmoIfnu4bluqZcclxuXHRtb3VzZVJhbmdlOiA2MCwgIC8v5b2x5ZON6IyD5Zu0XHJcblx0ZGlzcGVyc2U6IDUsIC8v57KS5a2Q5YGP56e76IyD5Zu0XHJcblx0cmVjb3Zlcnk6IDAuOTUgIC8v5oGi5aSN6YCf5bqm77yM6LaK5bCP6LaK5b+r77yMMeaXtuS4jeaBouWkjVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXJ0aWNsZSB7XHJcblx0Y29uc3RydWN0b3IoaWQsIG9wdGlvbikge1xyXG5cdFx0T2JqZWN0LmFzc2lnbih0aGlzLCBfZGVmYXVsdCwgb3B0aW9uKVxyXG5cdFx0dGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcclxuXHRcdHRoaXMuY3h0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxyXG5cdFx0dGhpcy5wYXJ0aWNsZXMgPSBbXVxyXG5cdFx0dGhpcy5pc0FuaW1hdGUgPSB0cnVlXHJcblx0XHR0aGlzLmluaXQoKVxyXG5cdH1cclxuXHRpbml0KCkge1xyXG5cdFx0dGhpcy5zZXRTaXplKClcclxuXHRcdHRoaXMuc2V0SW1hZ2UodGhpcy5zcmMpXHJcblx0fVxyXG5cdGRlc3RvcnkoKSB7XHJcblx0XHR0aGlzLmN4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpXHJcblx0XHR0aGlzLnBhcnRpY2xlcy5sZW5ndGggPSAwXHJcblx0XHR0aGlzLnN0b3AoKVxyXG5cdH1cclxuXHRiaW5kRXZlbnQoKSB7XHJcblx0XHR0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmdldE1vdXNlUG9zLmJpbmQodGhpcykpXHJcblx0fVxyXG5cdGdldE1vdXNlUG9zKGUpIHtcclxuXHQgICAgdGhpcy5teCA9IGUuY2xpZW50WCAtIHRoaXMuYm91bmRzLmxlZnQ7XHJcblx0XHR0aGlzLm15ID0gZS5jbGllbnRZIC0gdGhpcy5ib3VuZHMudG9wO1xyXG5cdH1cclxuXHRzZXRTaXplKCkge1xyXG5cdFx0dGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoXHJcblx0XHR0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodFxyXG5cdH1cclxuXHRzZXRJbWFnZShzcmMpIHtcclxuXHRcdHRoaXMuaW1nID0gbmV3IEltYWdlKClcclxuXHRcdHRoaXMuaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuXHRcdFx0aWYgKCF0aGlzLmltZ1NpemUpIHtcclxuXHRcdFx0XHR0aGlzLmltZ193aWR0aCA9IHRoaXMuaW1nLndpZHRoXHJcblx0XHRcdFx0dGhpcy5pbWdfaGVpZ2h0ID0gdGhpcy5pbWcuaGVpZ2h0XHJcblx0XHRcdFx0dGhpcy54ID0gdGhpcy54IHx8ICgodGhpcy53aWR0aCAtIHRoaXMuaW1nX3dpZHRoKSAvIDIpXHJcblx0XHRcdFx0dGhpcy55ID0gdGhpcy55IHx8ICgodGhpcy5oZWlnaHQgLSB0aGlzLmltZ19oZWlnaHQpIC8gMilcclxuXHRcdFx0XHR0aGlzLmN4dC5kcmF3SW1hZ2UodGhpcy5pbWcsIHRoaXMueCwgdGhpcy55KVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuaW1nX3dpZHRoID0gdGhpcy5pbWdTaXplWzBdXHJcblx0XHRcdFx0dGhpcy5pbWdfaGVpZ2h0ID0gdGhpcy5pbWdTaXplWzFdXHJcblx0XHRcdFx0dGhpcy54ID0gdGhpcy54IHx8ICgodGhpcy53aWR0aCAtIHRoaXMuaW1nX3dpZHRoKSAvIDIpXHJcblx0XHRcdFx0dGhpcy55ID0gdGhpcy55IHx8ICgodGhpcy5oZWlnaHQgLSB0aGlzLmltZ19oZWlnaHQpIC8gMilcclxuXHRcdFx0XHR0aGlzLmN4dC5kcmF3SW1hZ2UodGhpcy5pbWcsIHRoaXMueCwgdGhpcy55LCB0aGlzLmltZ193aWR0aCwgdGhpcy5pbWdfaGVpZ2h0KVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuZ2V0UGFydGljbGUoKVxyXG5cdFx0XHR0aGlzLmJvdW5kcyA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblx0XHRcdHRoaXMuYmluZEV2ZW50KClcclxuXHRcdH1cclxuXHRcdHRoaXMuaW1nLnNyYyA9IHNyY1xyXG5cdH1cclxuXHRnZXRQYXJ0aWNsZSgpIHtcclxuXHRcdGxldCBpbWFnZURhdGEgPSB0aGlzLmdldEltYWdlRGF0YSgpXHJcblx0XHRsZXQgc193aWR0aCA9IHBhcnNlSW50KCh0aGlzLmltZ193aWR0aCkgLyB0aGlzLmNvbHMpXHJcblx0XHRsZXQgc19oZWlnaHQgPSBwYXJzZUludCh0aGlzLmltZ19oZWlnaHQgLyB0aGlzLnJvd3MpXHJcblx0XHRsZXQgcG9zID0gMFxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gdGhpcy5jb2xzOyBpKyspIHtcclxuXHRcdFx0Zm9yIChsZXQgaiA9IDE7IGogPD0gdGhpcy5yb3dzOyBqKyspIHtcclxuXHRcdFx0XHRwb3MgPSAoaiAqIHNfaGVpZ2h0KSAqICh0aGlzLmltZ193aWR0aCkgKyAoaSAqIHNfd2lkdGgpXHJcblx0XHRcdFx0aWYgKGltYWdlRGF0YVtwb3NdICYmIHRoaXMuZmlsdGVyICYmIHRoaXMuZmlsdGVyLmFwcGx5KHRoaXMsIGltYWdlRGF0YVtwb3NdKSkge1xyXG5cdFx0XHRcdFx0bGV0IHggPSB0aGlzLnggKyBpICogc193aWR0aCArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHRoaXMuZGlzcGVyc2VcclxuXHRcdFx0XHRcdGxldCB5ID0gdGhpcy55ICsgaiAqIHNfaGVpZ2h0ICsgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogdGhpcy5kaXNwZXJzZVxyXG5cdFx0XHRcdFx0bGV0IHBhcnRpY2xlID0ge1xyXG5cdFx0XHRcdFx0XHR4OiB4LFxyXG5cdFx0XHRcdFx0XHR5OiB5LFxyXG5cdFx0XHRcdFx0XHRveDogeCxcclxuXHRcdFx0XHRcdFx0b3k6IHksXHJcblx0XHRcdFx0XHRcdHZ4OiAwLFxyXG5cdFx0XHRcdFx0XHR2eTogMCxcclxuXHRcdFx0XHRcdFx0Y29sb3I6IGltYWdlRGF0YVtwb3NdLmpvaW4oJywnKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy5wYXJ0aWNsZXMucHVzaChwYXJ0aWNsZSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMuc3RhcnQoKVxyXG5cdH1cclxuXHRnZXRJbWFnZURhdGEoKSB7XHJcblx0XHRsZXQgaW1hZ2VEYXRhID0gdGhpcy5jeHQuZ2V0SW1hZ2VEYXRhKHRoaXMueCwgdGhpcy55LCB0aGlzLmltZ193aWR0aCwgdGhpcy5pbWdfaGVpZ2h0KVxyXG5cdFx0bGV0IGRhdGEgPSBpbWFnZURhdGEuZGF0YVxyXG5cdFx0bGV0IGxlbiA9IGltYWdlRGF0YS5kYXRhLmxlbmd0aFxyXG5cdFx0bGV0IGFyciA9IFtdXHJcblx0XHQvL+i/t+S5i+S4jeebuOetie+8n1xyXG5cdFx0aWYgKGltYWdlRGF0YS53aWR0aCAhPT0gdGhpcy5pbWdfd2lkdGgpIHRoaXMuaW1nX3dpZHRoID0gaW1hZ2VEYXRhLndpZHRoXHJcblx0XHRpZiAoaW1hZ2VEYXRhLmhlaWdodCAhPT0gdGhpcy5pbWdfaGVpZ2h0KSB0aGlzLmltZ19oZWlnaHQgPSBpbWFnZURhdGEuaGVpZ2h0XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbiAvIDQ7IGkrKykge1xyXG5cdFx0XHRhcnIucHVzaChbZGF0YVtpICogNF0sIGRhdGFbaSAqIDQgKyAxXSwgZGF0YVtpICogNCArIDJdLCBkYXRhW2kgKiA0ICsgM11dKVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGFyclxyXG5cdH1cclxuXHRzdGFydCgpIHtcclxuXHRcdHRoaXMuaXNBbmltYXRlID0gdHJ1ZVxyXG5cdFx0Y29uc3Qgc3RlcCA9ICgpID0+IHtcclxuXHRcdFx0aWYgKCF0aGlzLmlzQW5pbWF0ZSkgcmV0dXJuIGZhbHNlXHJcblx0XHRcdHRoaXMucmVuZGVyKClcclxuXHRcdFx0dGhpcy51cGRhdGUoKVxyXG5cdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XHJcblx0XHR9XHJcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XHJcblx0fVxyXG5cdHN0b3AoKSB7XHJcblx0XHR0aGlzLmlzQW5pbWF0ZSA9IGZhbHNlXHJcblx0fVxyXG5cdHJlbmRlcigpIHtcclxuXHRcdHRoaXMuY3h0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodClcclxuXHJcblx0XHQvLyDnprvlsY/muLLmn5NcclxuXHRcdC8vIGxldCBjYW52YXNPZmZzY3JlZW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuXHRcdC8vIGNhbnZhc09mZnNjcmVlbi53aWR0aCA9IHRoaXMud2lkdGhcclxuXHRcdC8vIGNhbnZhc09mZnNjcmVlbi5oZWlnaHQgPSB0aGlzLmhlaWdodFxyXG5cdFx0Ly8gbGV0IGN4dCA9IGNhbnZhc09mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpXHJcblxyXG5cdFx0Ly8gQXJyYXkuZnJvbSh0aGlzLnBhcnRpY2xlcywgKHBhcnRpY2xlKSA9PiB7XHJcblx0XHQvLyBcdGN4dC5maWxsU3R5bGUgPSAncmdiYSgnICsgcGFydGljbGUuY29sb3IgKyAnKSdcclxuXHJcblx0XHQvLyBcdGN4dC5iZWdpblBhdGgoKVxyXG5cdFx0Ly8gXHRjeHQuYXJjKHBhcnRpY2xlLngsIHBhcnRpY2xlLnksIHRoaXMuciwgMCwgMiAqIE1hdGguUEksIHRydWUpXHJcblx0XHQvLyBcdGN4dC5jbG9zZVBhdGgoKVxyXG5cclxuXHRcdC8vIFx0Y3h0LmZpbGwoKVxyXG5cdFx0Ly8gfSlcclxuXHJcblx0XHQvLyB0aGlzLmN4dC5kcmF3SW1hZ2UoY2FudmFzT2Zmc2NyZWVuLCAwLCAwKTtcclxuXHJcblx0XHQvLyDmma7pgJrmuLLmn5NcclxuXHRcdEFycmF5LmZyb20odGhpcy5wYXJ0aWNsZXMsIChwYXJ0aWNsZSkgPT4ge1xyXG5cdFx0XHR0aGlzLmN4dC5maWxsU3R5bGUgPSAncmdiYSgnICsgcGFydGljbGUuY29sb3IgKyAnKSdcclxuXHJcblx0XHRcdHRoaXMuY3h0LmJlZ2luUGF0aCgpXHJcblx0XHRcdHRoaXMuY3h0LmFyYyhwYXJ0aWNsZS54LCBwYXJ0aWNsZS55LCB0aGlzLnIsIDAsIDIgKiBNYXRoLlBJLCB0cnVlKVxyXG5cdFx0XHR0aGlzLmN4dC5jbG9zZVBhdGgoKVxyXG5cclxuXHRcdFx0dGhpcy5jeHQuZmlsbCgpXHJcblx0XHR9KVxyXG5cdH1cclxuXHR1cGRhdGUoKSB7XHJcblx0XHRsZXQgcmFuZ2UgPSBNYXRoLnBvdyh0aGlzLm1vdXNlUmFuZ2UsIDIpXHJcblx0XHRsZXQgcCA9IG51bGwsXHJcblx0XHRcdGR4LCBkeSwgZCwgdCwgZlxyXG5cdFx0QXJyYXkuZnJvbSh0aGlzLnBhcnRpY2xlcywgKHBhcnRpY2xlKSA9PiB7XHJcblx0XHRcdHAgPSBwYXJ0aWNsZVxyXG5cdFx0XHRkeCA9IHRoaXMubXggLSBwLnhcclxuXHRcdFx0ZHkgPSB0aGlzLm15IC0gcC55XHJcblx0XHRcdGQgPSBkeCAqIGR4ICsgZHkgKiBkeVxyXG5cdFx0XHRmID0gLXJhbmdlIC8gZFxyXG5cdFx0XHRpZiAoTWF0aC5zcXJ0KGQpIDwgcmFuZ2UpIHtcclxuXHRcdFx0XHR0ID0gTWF0aC5hdGFuMihkeSwgZHgpXHJcblx0XHRcdFx0cC52eCArPSBmICogTWF0aC5jb3ModClcclxuXHRcdFx0XHRwLnZ5ICs9IGYgKiBNYXRoLnNpbih0KVxyXG5cdFx0XHR9XHJcblx0XHRcdHAudnggKj0gdGhpcy5yZWNvdmVyeVxyXG5cdFx0XHRwLnZ5ICo9IHRoaXMucmVjb3ZlcnlcclxuXHRcdFx0cC54ICs9IHAudnggKyAocC5veCAtIHAueCkgKiAwLjI1XHJcblx0XHRcdHAueSArPSBwLnZ5ICsgKHAub3kgLSBwLnkpICogMC4yNVxyXG5cdFx0fSlcclxuXHR9XHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
