define(["exports"],function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),i={size:2,backgroundColor:"#fff"},a=function(){function t(s,a){e(this,t),Object.assign(this,i,a),this.elem=document.getElementById(s),this.wrap=this.elem.parentNode,this.ctx=this.elem.getContext("2d"),this.width=this.elem.width=this.elem.offsetWidth,this.height=this.elem.height=this.elem.offsetHeight,this.elem.classList.remove("full"),this.getBound(),this.setBackgroundColor(),this.createMask(),this.trashCanvas(),this.bindEvent(),this.clear=this.clear,this.color=a.color}return s(t,[{key:"getBound",value:function(){this.left=this.elem.getBoundingClientRect().left,this.top=this.elem.getBoundingClientRect().top}},{key:"setBackgroundColor",value:function(){this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height)}},{key:"bindEvent",value:function(){var t=this;this.mask.addEventListener("mousedown",function(e){t.flag=!0,t.lastX=e.offsetX-0*t.left,t.lastY=e.offsetY-0*t.top,t.ctx.drawImage(t.mask,0,0),t.maskCtx.clearRect(0,0,t.width,t.height)}),this.mask.addEventListener("mousemove",function(e){if(!t.flag)return!1;var s=e.offsetX-0*t.left,i=e.offsetY-0*t.top;t.draw(s,i)}),this.mask.addEventListener("mouseup",function(e){t.flag=!1,t.clearFlag=!1}),this.wrap.addEventListener("mouseleave",function(e){t.flag=!1,t.clearFlag=!1})}},{key:"createMask",value:function(){this.mask=document.createElement("canvas"),this.mask.className="canvas-mask",this.maskCtx=this.mask.getContext("2d"),this.mask.width=this.width,this.mask.height=this.height,document.querySelector(".canvas-wrap").appendChild(this.mask)}},{key:"trashCanvas",value:function(){this.trashCanvas=document.createElement("canvas"),this.trashCanvasCtx=this.trashCanvas.getContext("2d"),this.trashCanvas.width=this.width,this.trashCanvas.height=this.height}},{key:"draw",value:function(t,e){this.maskCtx.beginPath(),this.maskCtx.strokeStyle=this.color,this.maskCtx.lineWidth=this.size,this.maskCtx.lineJoin="round",this.maskCtx.moveTo(this.lastX,this.lastY),this.maskCtx.lineTo(t,e),this.maskCtx.closePath(),this.maskCtx.stroke(),this.lastX=t,this.lastY=e}},{key:"repeal",value:function(){this.clearFlag&&this.ctx.drawImage(this.trashCanvas,0,0),this.maskCtx.clearRect(0,0,this.width,this.height)}},{key:"clear",value:function(){this.clearFlag=!0,this.trashCanvasCtx.drawImage(this.elem,0,0),this.trashCanvasCtx.drawImage(this.mask,0,0),this.maskCtx.clearRect(0,0,this.width,this.height),this.ctx.clearRect(0,0,this.width,this.height),this.setBackgroundColor(),this.img&&this.ctx.drawImage(this.img,0,0)}},{key:"loadImg",value:function(t){var e=this;this.clear(),this.img=new Image,this.img.onload=function(){e.trashCanvas.width=e.mask.width=e.width=e.elem.width=e.img.width,e.trashCanvas.height=e.mask.height=e.height=e.elem.height=e.img.height,e.maskCtx.drawImage(e.img,0,0),e.getBound()},this.img.src=t}},{key:"saveImg",value:function(){this.ctx.drawImage(this.mask,0,0),window.open(this.elem.toDataURL())}}]),t}();t["default"]=a});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbnZhcy5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCJleHBvcnRzIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9kZWZhdWx0Iiwic2l6ZSIsImJhY2tncm91bmRDb2xvciIsIlBhcnRpY2xlIiwiaWQiLCJvcHRpb24iLCJ0aGlzIiwiYXNzaWduIiwiZWxlbSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ3cmFwIiwicGFyZW50Tm9kZSIsImN0eCIsImdldENvbnRleHQiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZ2V0Qm91bmQiLCJzZXRCYWNrZ3JvdW5kQ29sb3IiLCJjcmVhdGVNYXNrIiwidHJhc2hDYW52YXMiLCJiaW5kRXZlbnQiLCJjbGVhciIsImNvbG9yIiwibGVmdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiX3RoaXMiLCJtYXNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJmbGFnIiwibGFzdFgiLCJvZmZzZXRYIiwibGFzdFkiLCJvZmZzZXRZIiwiZHJhd0ltYWdlIiwibWFza0N0eCIsImNsZWFyUmVjdCIsIngiLCJ5IiwiZHJhdyIsImNsZWFyRmxhZyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJxdWVyeVNlbGVjdG9yIiwiYXBwZW5kQ2hpbGQiLCJ0cmFzaENhbnZhc0N0eCIsImJlZ2luUGF0aCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwibGluZUpvaW4iLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJzdHJva2UiLCJpbWciLCJzcmMiLCJfdGhpczIiLCJJbWFnZSIsIm9ubG9hZCIsIndpbmRvdyIsIm9wZW4iLCJ0b0RhdGFVUkwiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRLFdBQVksU0FBVUMsR0FBOUIsWUFPQyxTQUFTQyxHQUFnQkMsRUFBVUMsR0FDbEMsS0FBTUQsWUFBb0JDLElBQ3pCLEtBQU0sSUFBSUMsV0FBVSxxQ0FOdEJDLE9BQU9DLGVBQWVOLEVBQVMsY0FDOUJPLE9BQU8sR0FTUixJQUFJQyxHQUFlLFdBQ2xCLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUNqQyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUN0QyxHQUFJRSxHQUFhSCxFQUFNQyxFQUN2QkUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUNqREQsRUFBV0UsY0FBZSxFQUN0QixTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQ2pEWixPQUFPQyxlQUFlSSxFQUFRSSxFQUFXSSxJQUFLSixJQUloRCxNQUFPLFVBQVVYLEVBQWFnQixFQUFZQyxHQUd6QyxNQUZJRCxJQUFZVixFQUFpQk4sRUFBWWtCLFVBQVdGLEdBQ3BEQyxHQUFhWCxFQUFpQk4sRUFBYWlCLEdBQ3hDakIsTUF6QkptQixHQUNMQyxLQUFNLEVBQ05DLGdCQUFpQixRQUdHQyxFQTZCTCxXQTVCZixRQUFBQSxHQUFZQyxFQUFJQyxHQUFRMUIsRUFBQTJCLEtBQUFILEdBQ3ZCcEIsT0FBT3dCLE9BQU9ELEtBQU1OLEVBQVVLLEdBQzlCQyxLQUFLRSxLQUFPQyxTQUFTQyxlQUFlTixHQUNwQ0UsS0FBS0ssS0FBT0wsS0FBS0UsS0FBS0ksV0FDdEJOLEtBQUtPLElBQU1QLEtBQUtFLEtBQUtNLFdBQVcsTUFDaENSLEtBQUtTLE1BQVFULEtBQUtFLEtBQUtPLE1BQVFULEtBQUtFLEtBQUtRLFlBQ3pD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QUtFLEtBQUs2RCxpQkE0RGZsRSxJQUdSekIsR0FBQUEsV0F0S29CeUIiLCJmaWxlIjoiY2FudmFzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgX2RlZmF1bHQgPSB7XHJcblx0c2l6ZTogMixcclxuXHRiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmJ1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXJ0aWNsZSB7XHJcblx0Y29uc3RydWN0b3IoaWQsIG9wdGlvbikge1xyXG5cdFx0T2JqZWN0LmFzc2lnbih0aGlzLCBfZGVmYXVsdCwgb3B0aW9uKTtcclxuXHRcdHRoaXMuZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuXHRcdHRoaXMud3JhcCA9IHRoaXMuZWxlbS5wYXJlbnROb2RlO1xyXG5cdFx0dGhpcy5jdHggPSB0aGlzLmVsZW0uZ2V0Q29udGV4dCgnMmQnKTtcclxuXHRcdHRoaXMud2lkdGggPSB0aGlzLmVsZW0ud2lkdGggPSB0aGlzLmVsZW0ub2Zmc2V0V2lkdGg7XHJcblx0XHR0aGlzLmhlaWdodCA9IHRoaXMuZWxlbS5oZWlnaHQgPSB0aGlzLmVsZW0ub2Zmc2V0SGVpZ2h0O1xyXG5cdFx0dGhpcy5lbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2Z1bGwnKTtcclxuXHRcdHRoaXMuZ2V0Qm91bmQoKTtcclxuXHRcdHRoaXMuc2V0QmFja2dyb3VuZENvbG9yKCk7XHJcblx0XHR0aGlzLmNyZWF0ZU1hc2soKTtcclxuXHRcdHRoaXMudHJhc2hDYW52YXMoKTtcclxuXHRcdHRoaXMuYmluZEV2ZW50KCk7XHJcblx0XHR0aGlzLmNsZWFyID0gdGhpcy5jbGVhcjtcclxuXHJcblx0XHR0aGlzLmNvbG9yID0gb3B0aW9uLmNvbG9yO1xyXG5cdH1cclxuXHRnZXRCb3VuZCgpIHtcclxuXHRcdHRoaXMubGVmdCA9IHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG5cdFx0dGhpcy50b3AgPSB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cdH1cclxuXHRzZXRCYWNrZ3JvdW5kQ29sb3IoKSB7XHJcblx0XHR0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmJhY2tncm91bmRDb2xvcjtcclxuXHRcdHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuXHR9XHJcblx0YmluZEV2ZW50KCkge1xyXG5cdFx0dGhpcy5tYXNrLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XHJcblx0XHRcdHRoaXMuZmxhZyA9IHRydWU7XHJcblx0XHRcdHRoaXMubGFzdFggPSBlLm9mZnNldFggLSB0aGlzLmxlZnQgKiAwO1xyXG5cdFx0XHR0aGlzLmxhc3RZID0gZS5vZmZzZXRZIC0gdGhpcy50b3AgKiAwO1xyXG5cdFx0XHR0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5tYXNrLCAwLCAwKTtcclxuXHRcdFx0dGhpcy5tYXNrQ3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblx0XHR9KVxyXG5cdFx0dGhpcy5tYXNrLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChlKSA9PiB7XHJcblx0XHRcdGlmICghdGhpcy5mbGFnKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdGxldCB4ID0gZS5vZmZzZXRYIC0gdGhpcy5sZWZ0ICogMDtcclxuXHRcdFx0bGV0IHkgPSBlLm9mZnNldFkgLSB0aGlzLnRvcCAqIDA7XHJcblx0XHRcdHRoaXMuZHJhdyh4LCB5KTtcclxuXHRcdH0pXHJcblx0XHR0aGlzLm1hc2suYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChlKSA9PiB7XHJcblx0XHRcdHRoaXMuZmxhZyA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLmNsZWFyRmxhZyA9IGZhbHNlO1xyXG5cdFx0fSlcclxuXHRcdHRoaXMud3JhcC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKGUpID0+IHtcclxuXHRcdFx0dGhpcy5mbGFnID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuY2xlYXJGbGFnID0gZmFsc2U7XHJcblx0XHR9KVxyXG5cdH1cclxuXHRjcmVhdGVNYXNrKCkge1xyXG5cdFx0dGhpcy5tYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcblx0XHR0aGlzLm1hc2suY2xhc3NOYW1lID0gJ2NhbnZhcy1tYXNrJztcclxuXHRcdHRoaXMubWFza0N0eCA9IHRoaXMubWFzay5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdFx0dGhpcy5tYXNrLndpZHRoID0gdGhpcy53aWR0aDtcclxuXHRcdHRoaXMubWFzay5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXMtd3JhcCcpLmFwcGVuZENoaWxkKHRoaXMubWFzayk7XHJcblx0fVxyXG5cdHRyYXNoQ2FudmFzKCkge1xyXG5cdFx0dGhpcy50cmFzaENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG5cdFx0dGhpcy50cmFzaENhbnZhc0N0eCA9IHRoaXMudHJhc2hDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHRcdHRoaXMudHJhc2hDYW52YXMud2lkdGggPSB0aGlzLndpZHRoO1xyXG5cdFx0dGhpcy50cmFzaENhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuXHR9XHJcblx0ZHJhdyh4LCB5KSB7XHJcblx0XHR0aGlzLm1hc2tDdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdGhpcy5tYXNrQ3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgICB0aGlzLm1hc2tDdHgubGluZVdpZHRoID0gdGhpcy5zaXplO1xyXG4gICAgICAgIHRoaXMubWFza0N0eC5saW5lSm9pbiA9IFwicm91bmRcIjtcclxuICAgICAgICB0aGlzLm1hc2tDdHgubW92ZVRvKHRoaXMubGFzdFgsIHRoaXMubGFzdFkpO1xyXG4gICAgICAgIHRoaXMubWFza0N0eC5saW5lVG8oeCwgeSk7XHJcbiAgICAgICAgdGhpcy5tYXNrQ3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIHRoaXMubWFza0N0eC5zdHJva2UoKTtcclxuICAgICAgICB0aGlzLmxhc3RYID0geDtcclxuICAgICAgICB0aGlzLmxhc3RZID0geTtcclxuXHR9XHJcblx0cmVwZWFsKCkge1xyXG5cdFx0dGhpcy5jbGVhckZsYWcgJiYgdGhpcy5jdHguZHJhd0ltYWdlKHRoaXMudHJhc2hDYW52YXMsIDAsIDApO1xyXG5cdFx0dGhpcy5tYXNrQ3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblx0fVxyXG5cdGNsZWFyKCkge1xyXG5cdFx0dGhpcy5jbGVhckZsYWcgPSB0cnVlO1xyXG5cdFx0dGhpcy50cmFzaENhbnZhc0N0eC5kcmF3SW1hZ2UodGhpcy5lbGVtLCAwLCAwKTtcclxuXHRcdHRoaXMudHJhc2hDYW52YXNDdHguZHJhd0ltYWdlKHRoaXMubWFzaywgMCwgMCk7XHJcblx0XHR0aGlzLm1hc2tDdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuXHRcdHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblx0XHR0aGlzLnNldEJhY2tncm91bmRDb2xvcigpO1xyXG5cdFx0aWYgKHRoaXMuaW1nKSB7XHJcblx0XHRcdHRoaXMuY3R4LmRyYXdJbWFnZSh0aGlzLmltZywgMCwgMCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGxvYWRJbWcoc3JjKSB7XHJcblx0XHR0aGlzLmNsZWFyKCk7XHJcblx0XHR0aGlzLmltZyA9IG5ldyBJbWFnZSgpXHJcblx0XHR0aGlzLmltZy5vbmxvYWQgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMudHJhc2hDYW52YXMud2lkdGggPSB0aGlzLm1hc2sud2lkdGggPSB0aGlzLndpZHRoID0gdGhpcy5lbGVtLndpZHRoID0gdGhpcy5pbWcud2lkdGg7XHJcblx0XHRcdHRoaXMudHJhc2hDYW52YXMuaGVpZ2h0ID0gdGhpcy5tYXNrLmhlaWdodCA9IHRoaXMuaGVpZ2h0ID0gdGhpcy5lbGVtLmhlaWdodCA9IHRoaXMuaW1nLmhlaWdodDtcclxuXHRcdFx0dGhpcy5tYXNrQ3R4LmRyYXdJbWFnZSh0aGlzLmltZywgMCwgMCk7XHJcblx0XHRcdHRoaXMuZ2V0Qm91bmQoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuaW1nLnNyYyA9IHNyY1xyXG5cdH1cclxuXHRzYXZlSW1nKCkge1xyXG5cdFx0dGhpcy5jdHguZHJhd0ltYWdlKHRoaXMubWFzaywgMCwgMCk7XHJcblx0XHR3aW5kb3cub3Blbih0aGlzLmVsZW0udG9EYXRhVVJMKCkpO1xyXG5cdH1cclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
