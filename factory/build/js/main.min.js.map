{"version":3,"file":"main.min.js","sources":["../../src/scripts/modules/Detector.ts","../../src/scripts/modules/Processor.ts","../../src/scripts/modules/missions/mission1.ts","../../src/scripts/modules/missions/mission2.ts","../../src/scripts/modules/missions/mission3.ts","../../src/scripts/modules/missions/mission4.ts","../../src/scripts/modules/missions/index.ts","../../src/scripts/modules/Missions.ts","../../src/scripts/modules/Factory.ts","../../src/scripts/main.ts"],"sourcesContent":["import { IData } from './Factory'\n\ninterface IDetectorData extends IData {\n  output_el?: any;\n  index: number;\n}\n\n/*  Factory检测器对象  */\nexport default class Detector {\n  // 测试数据数组\n  data: IData[];\n  // 检测器测试数据数组\n  items: IDetectorData[] = [];\n  last_output: any;\n  success_count: number;\n  isMultigroup: boolean;\n  wrap: HTMLElement;\n  elem: HTMLElement;\n  input_group: HTMLElement;\n  output_group: any;\n  expect_group: HTMLElement;\n  constructor (options?: object) {\n    Object.assign(this, options)\n    this.init()\n  }\n  /*  初始化  */\n  init () {\n    this.last_output = 0\n    this.success_count = 0\n    this.createDetector()\n    this.initIems()\n    this.render()\n  }\n  /*  销毁  */\n  destroy () {\n    this.wrap.removeChild(this.elem)\n  }\n  /*  重置  */\n  reset () {\n    this.success_count = 0\n    this.setActive(null, this.input_group)\n    if (this.isMultigroup) {\n      this.last_output = {}\n      for (let key in this.output_group) {\n        this.last_output[key] = 0\n        this.setActive(null, this.output_group[key].output_cgroup)\n      }\n      Array.from(this.items, (obj) => {\n        obj.output = {}\n        for (let i in obj.output_el) {\n          obj.output_el[i].textContent = ''\n          obj.output_el[i].className = 'factory-item'\n        }\n      })\n    } else {\n      this.last_output = 0\n      this.setActive(null, this.output_group)\n      Array.from(this.items, (obj) => {\n        obj.output_el.textContent = ''\n        obj.output_el.className = 'factory-item'\n      })\n    }\n  }\n  /*  创建右侧检测器  */\n  createDetector () {\n    this.elem = document.createElement('DIV')\n    this.elem.className = 'factory-detector'\n    if (this.isMultigroup) {\n      this.output_group = {}\n      this.last_output = {}\n      this.input_group = this.createGroup('IN')\n      for (let key in this.data[0].expectant_output) {\n        this.output_group[key] = {}\n        this.last_output[key] = 0\n        this.output_group[key].el = this.createGroup(`OUT.${key}`)\n        let el = document.createElement('DIV')\n        el.className = 'factory-group-child-wrap'\n        this.output_group[key].expect_cgroup = this.createChildGroup(el, 'factory-expect-group-wrap')\n        this.output_group[key].output_cgroup = this.createChildGroup(el, 'factory-output-group-wrap')\n        this.output_group[key].exports = []\n        this.output_group[key].output = []\n        this.output_group[key].el.appendChild(el)\n      }\n    } else {\n      this.input_group = this.createGroup('IN')\n      this.output_group = this.createGroup('OUT')\n      this.expect_group = this.createGroup('EXP')\n    }\n    this.wrap.firstChild ? this.wrap.insertBefore(this.elem, this.wrap.firstChild) : this.wrap.appendChild(this.elem)\n  }\n  /*  生成各组  */\n  createGroup (name: string): HTMLElement {\n    let elem = document.createElement('DIV')\n    elem.className = 'factory-group'\n    elem.innerHTML = `<div class=\"group-title\">${name}</div>`\n    this.elem.appendChild(elem)\n    return elem\n  }\n  /*  生成子组  */\n  createChildGroup (wrap: HTMLElement, className: string): HTMLElement {\n    let elem = document.createElement('DIV')\n    elem.className = `factory-group-child ${className}`\n    wrap.appendChild(elem)\n    return elem\n  }\n  /*  生成各项  */\n  createItem (value: string | null, index: any, wrap: HTMLElement): HTMLElement {\n    let elem = document.createElement('DIV')\n    elem.className = 'factory-item'\n    elem.innerHTML = value !== null ? JSON.stringify(value) : ''\n    elem.setAttribute('data-index', index)\n    wrap.appendChild(elem)\n    return elem\n  }\n  /*  初始化各项  */\n  initIems () {\n    this.items = Array.from(this.data, (obj, index) => Object.assign({ index }, obj))\n  }\n  /*  绘制  */\n  render () {\n    Array.from(this.items, (obj, i) => {\n      if (this.isMultigroup) {\n        this.createItem(obj.input, i, this.input_group)\n        obj.output_el = {}\n        obj.output = {}\n        for (let key in obj.expectant_output) {\n          let val = obj.expectant_output[key]\n          obj.output_el[key] = this.createItem(null, i, this.output_group[key].output_cgroup)\n          this.createItem(val, i, this.output_group[key].expect_cgroup)\n          this.output_group[key].exports.push(val)\n        }\n      } else {\n        this.createItem(obj.input, i, this.input_group)\n        obj.output_el = this.createItem(obj.output, i, this.output_group)\n        this.createItem(obj.expectant_output, i, this.expect_group)\n      }\n    })\n  }\n  /*  设置input的位置  */\n  setInputActive (index?: number) {\n    this.setActive(index, this.input_group)\n  }\n  /*  设置当前位置  */\n  setActive (index?: number | null, wrap: HTMLElement) {\n    let active = wrap.querySelector('.active')\n    active && active.classList.remove('active')\n    if (typeof index === 'number') {\n      let elem = wrap.querySelector(`[data-index=\"${index}\"]`)\n      elem && elem.classList.add('active')\n    }\n  }\n  /*  输出值  */\n  output (val: string, key: string) {\n    let index = this.isMultigroup ? this.last_output[key] : this.last_output\n    if (this.isMultigroup) {\n      let obj = this.output_group[key]\n      if (index < this.data.length) {\n        let exp = obj.exports[index]\n        let output_el = this.items[index].output_el[key]\n        let mObj = {\n          output: val,\n          expectant_output: exp,\n          output_el: output_el\n        }\n        this.items[index].output[key] = obj.output[index] = val\n        output_el.textContent = val !== null ? JSON.stringify(val) : ''\n        this.examine(index, mObj)\n        this.setActive(index++, obj.output_cgroup)\n        this.last_output[key] = index\n        if (index === this.data.length) {\n          this.setActive(null, obj.output_cgroup)\n        }\n      }\n    } else {\n      if (index < this.data.length) {\n        this.items[index].output = val\n        this.items[index].output_el.textContent = val !== null ? JSON.stringify(val) : ''\n        this.examine(index)\n        this.setActive(index++, this.output_group)\n        this.last_output = index\n        if (index === this.data.length) {\n          this.setActive(null, this.output_group)\n        }\n      }\n    }\n  }\n  /*  检查是否正确  */\n  examine (index: number, mObj?: any) {\n    let obj = mObj || this.items[index]\n    if (this.isDiff(obj.output, obj.expectant_output)) {\n      obj.output_el.classList.add('error')\n    } else {\n      if (this.isMultigroup) {\n        if (!this.isDiff(this.items[index].output, this.items[index].expectant_output)) {\n          this.success_count++\n        }\n      } else {\n        this.success_count++\n      }\n      obj.output_el.classList.add('success')\n    }\n  }\n  /*  两个值是否不相等  */\n  isDiff (a: any, b: any): boolean {\n    if (Object.prototype.toString.call(a) !== Object.prototype.toString.call(b)) {\n      return true\n    } else if (Array.isArray(a)) {\n      return a.length !== b.length || a.some((v, i) => v !== b[i])\n    } else if (typeof a === 'object') {\n      if (Object.keys(a).length !== Object.keys(b).length)\n        return true\n      for (let i in a) {\n        if (a[i] !== b[i])\n          return true\n      }\n      return false\n    }\n    return a !== b\n  }\n}","import Factory from './Factory'\n\nexport type TypePort = 'entry' | 'export'\nexport type TypeProcess = 'leftProcessor' | 'rightProcessor' | 'topProcessor' | 'bottomProcessor'\nexport type TypePos = 'left' | 'right' | 'top' | 'bottom'\n\ninterface IPort {\n  name: string,\n  type?: TypePort\n}\n\n/*  Factory处理器对象  */\nexport default class Processor {\n  index: number;        // 处理器编号\n  width: '30%';         // 处理器宽度\n  height: '30%';        // 处理器高度\n  _NEXT?: string | null = null;          // 上个过程将覆盖ACC的值\n  _ACC?: string | null = null;           // 处理空间\n  _COM?: string | null = null;           // 存储空间\n  _context: object = {};             // 代码执行上下文\n  cur_size: number = 0;          // 当前大小\n  size: number;              // 限制大小\n  defaultText?: string;      // 初始化时默认文本\n  status: 'idle' | 'error' | 'unavail'; // 处理器状态 ['unavail', 'idle', 'error']\n  elem: HTMLElement;\n  code: HTMLTextAreaElement;\n  wrap: HTMLElement;\n  ports: HTMLElement[];\n  processWrap: HTMLElement;\n  displayArea: HTMLElement;\n  displayNEXT: HTMLElement;\n  displayACC: HTMLElement;\n  displayCOM: HTMLElement;\n  displayStatus: HTMLElement;\n  displaySize: HTMLElement;\n  factory: Factory;\n  leftProcessor: IPort | Processor | null;\n  rightProcessor: IPort | Processor | null;\n  topProcessor: IPort | Processor | null;\n  bottomProcessor: IPort | Processor | null;\n  constructor (options?: Object) {\n    Object.assign(this, options)\n    this.asyncSize = this.asyncSize.bind(this)\n    this.closeError = this.closeError.bind(this)\n    this.init()\n  }\n  /*  绑定事件  */\n  bindEvent () {\n    this.code.addEventListener('keyup', this.asyncSize)\n    this.elem.addEventListener('click', this.closeError)\n  }\n  /*  注销事件  */\n  unbindEvent () {\n    this.code.removeEventListener('keyup', this.asyncSize)\n    this.elem.removeEventListener('click', this.closeError)\n  }\n  /*  初始化  */\n  init () {\n    this.ports = []\n    this.createProcessor()\n    this.bindEvent()\n  }\n  /*  销毁对象  */\n  destroy () {\n    this.wrap.removeChild(this.processWrap)\n    this.unbindEvent()\n  }\n  /*  创建一个处理器  */\n  createProcessor () {\n    this.processWrap = document.createElement('DIV')\n    this.processWrap.className = 'factory-process-wrap'\n    this.processWrap.style.cssText = `\n    width: ${this.width};\n    height: ${this.height};\n    padding: 14px;\n    `\n\n    this.elem = document.createElement('DIV')\n    this.elem.className = 'factory-process'\n    this.status === 'error' && this.setError()\n    this.code = this.createCode()\n    this.displayArea = this.createDisplayArea()\n    this.processWrap.appendChild(this.elem)\n    this.wrap.appendChild(this.processWrap)\n  }\n  /*  错误模式  */\n  setError () {\n    this.elem.classList.add('factory-error')\n    this.elem.setAttribute('data-error', 'ERROR')\n  }\n  /*  代码出错  */\n  setCodeError (err: string) {\n    this.elem.classList.add('factory-code-error')\n    this.elem.setAttribute('data-error', err)\n    this.factory.pause()\n  }\n  /*  代码出错遮罩层关闭  */\n  closeError () {\n    if (this.elem.classList.contains('factory-code-error')) {\n      this.elem.classList.remove('factory-code-error')\n    }\n  }\n  /*  创建代码窗口textarea  */\n  createCode () {\n    let elem = document.createElement('DIV')\n    elem.className = 'code-group'\n    elem.innerHTML = `<div class=\"code-index\">Processor ${this.index + 1}</div>`\n\n    let textarea = <HTMLTextAreaElement> document.createElement('TEXTAREA')\n    textarea.className = 'code'\n    if (this.defaultText) {\n      textarea.value = this.defaultText || ''\n      this.asyncSize(this.defaultText, textarea)\n    }\n    textarea.removeAttribute('spellcheck')\n    elem.appendChild(textarea)\n    this.elem.appendChild(elem)\n    return textarea\n  }\n  /*  创建展示台  */\n  createDisplayArea () {\n    let elem = document.createElement('DIV')\n    elem.className = 'display-area'\n    this.displayNEXT = this.createItem('NEXT', this._NEXT, elem)\n    this.displayACC = this.createItem('ACC', this._ACC, elem)\n    this.displayCOM = this.createItem('COM', this._COM, elem)\n    this.displayStatus = this.createItem('STATUS', this.status, elem)\n    this.displaySize = this.createItem('BYTE', `${this.cur_size}/${this.size}`, elem)\n    this.elem.appendChild(elem)\n    return elem\n  }\n  /*  创建展示台的项目  */\n  createItem (name: string, value?: string | null, wrap?: HTMLElement): HTMLElement {\n    let elem = document.createElement('DIV')\n    elem.className = 'display-item'\n    elem.innerHTML = `<div class=\"item-title\">${name}</div>`\n\n    let value_elem = <HTMLElement> document.createElement('DIV')\n    value_elem.className = 'item-value'\n    value_elem.textContent = value || ''\n    elem.appendChild(value_elem)\n    wrap && wrap.appendChild(elem)\n    return value_elem\n  }\n  /*  同步用户输入长度  */\n  asyncSize (e: any, el?: HTMLTextAreaElement) {\n    let value = typeof e === 'string' ? e : e.target.value\n    let formatted_val = value.match(/\\S/g)\n    this.cur_size = formatted_val ? this.getByteLen(formatted_val) : 0\n    if (this.cur_size > this.size) {\n      this.cur_size = this.size\n      let str = '', n = 0\n      for (let ch of value) {\n        str += ch\n        if (/\\S/.test(ch)) {\n          n += ch.match(/[\\u4E00-\\u9FA5]/g) != null ? 2 : 1\n        }\n        if (n >= this.size)\n          break\n      }\n      el = el || this.code\n      el.value = str\n    }\n    if (typeof e === 'object')\n      this.displaySize.innerHTML = `${this.cur_size}/${this.size}`\n  }\n  /*  得到代码长度  */\n  getByteLen (str: string): number {\n    let len = 0\n    for (let ch of str) {\n      if (ch.match(/[\\u4E00-\\u9FA5]/g) !== null) {\n        len += 2\n      } else {\n        len += 1\n      }\n    }\n    return len\n  }\n  /*  处理器传递前判断  */\n  transmitACC (val: any, portProcessor: IPort | Processor | null) {\n    if (!portProcessor) {\n      return false\n    }\n    else if (portProcessor instanceof Processor) {\n      portProcessor.setNext(val)\n    } else if (portProcessor.type === 'entry') {\n      return false\n    } else if (portProcessor.type === 'export') {\n      val !== null && this.factory.detector && this.factory.detector.output(val, portProcessor.name)\n    }\n  }\n  setCom (val: any) {\n    this._COM = val\n    this.displayCOM.innerHTML = this.formatVal(this._COM)\n  }\n  /*  设置Status  */\n  setStatus (val: any) {\n    this.status = val\n    this.displayStatus.innerHTML = this.status\n  }\n  /*  设置Next值  */\n  setNext (val: any) {\n    if (this.status === 'error')\n      return\n\n    this._NEXT = val\n    this.displayNEXT.innerHTML = this.formatVal(this._NEXT)\n  }\n  /*  运行  */\n  next () {\n    if (this.status === 'error')\n      return false\n\n    this.isEnd()\n    this._ACC !== null && this.executeCode() // 执行用户的代码\n  }\n  /*  将NEXT传递给ACC  */\n  resetACC () {\n    this._ACC = this._NEXT\n    this.displayACC.textContent = this.formatVal(this._ACC)\n    this.setNext(null)\n  }\n  /*  判断是否全部执行完毕 (全部NEXT和ACC为零)  */\n  isEnd () {\n    if (this._ACC === null && this._NEXT === null) {\n      this.setStatus('idle')\n    } else {\n      this.setStatus('run')\n    }\n  }\n  /*  执行用户的代码  */\n  executeCode () {\n    let code = this.code.value\n    const fn = (context: Object, __ERROR__: (err: any) => any) => {\n      try {\n        let withCode = `\n          with (this){\n            return eval(arguments[0])\n          }\n          return code\n        `\n        new Function(withCode).call(Object.assign({}, this._context, context), code)\n      }\n      catch (err) {\n        console.error(err)\n        __ERROR__(err)\n      }\n    }\n\n    fn({\n      NEXT: this._NEXT,\n      ACC: this._ACC,\n      COM: this._COM,\n      L: (val = this._ACC) => this.transmitACC(val, this.leftProcessor),\n      R: (val = this._ACC) => this.transmitACC(val, this.rightProcessor),\n      T: (val = this._ACC) => this.transmitACC(val, this.topProcessor),\n      B: (val = this._ACC) => this.transmitACC(val, this.bottomProcessor),\n      C: (val = null) => this.setCom(val)\n    }, (err: any) => this.setCodeError(err))\n  }\n  /*  设置进出口  */\n  setPort (obj: { name: string, pos: TypePos }, type: TypePort) {\n    this[<TypeProcess> `${obj.pos}Processor`] = {\n      type,\n      name: obj.name\n    }\n    this.ports.push(this.createPortElem(obj, type))\n  }\n  /*  生产端口元素  */\n  createPortElem (obj: { name: string, pos: TypePos }, type: TypePort): HTMLElement {\n    let elem = document.createElement('DIV')\n    elem.className = `factory-port ${type} factory-pos-${obj.pos}`\n    elem.innerHTML = `${type === 'entry' ? 'IN' : 'OUT'} ${obj.name || ''} <i class=\"iconfont icon-${type === 'entry' ? this.reversePos(obj.pos) : obj.pos}-arrow\"></i>`\n    this.elem.appendChild(elem)\n    return elem\n  }\n  /*  获得相反方向  */\n  reversePos (pos: TypePos): string {\n    const direction = {\n      left: 'right',\n      right: 'left',\n      top: 'bottom',\n      bottom: 'top'\n    }\n    return direction[pos]\n  }\n  /*  格式化输出值  */\n  formatVal (val: any): string {\n    if (!val) {\n      return ''\n    } else if (typeof val === 'object') {\n      return JSON.stringify(val)\n    } else {\n      return '' + val\n    }\n  }\n}","let total = 0\nconst missionCreater = () => {\n  const createMandom = () => ~~(Math.random() * 10)\n  let input = createMandom()\n  let output = input * 2\n  total += output\n  return {\n    input: input,\n    output: {\n      A: input * 2,\n      B: total\n    }\n  }\n}\n\nexport default {\n  missionCreater,\n  intro: 'Mission 0：教程关',\n  err: [],\n  cols: 3,\n  rows: 2,\n  size: 256,\n  isMultigroup: true,\n  entry: {\n    '0': {\n      pos: 'top'\n    }\n  },\n  export: {\n    '2': {\n      name: 'A',\n      pos: 'top'\n    },\n    '5': {\n      name: 'B',\n      pos: 'bottom'\n    }\n  },\n  defaultTexts: {\n    '0':\n`// 由 IN 传入值\n\n// NEXT 为下一个值\n// console.log(NEXT)\n\n// ACC 为当前值\n// console.log(ACC)\n\n// 将 ACC 传给右方 Processor\nR(ACC)`,\n    '1':\n`// Next 从左方 Processor 传入\n// console.log(NEXT)\n\n// 将ACC 乘以 2\nACC = ACC * 2\n\n// 将 ACC 传给右方 Process\nR(ACC)`,\n    '2':\n`// 将 ACC 输出(OUT A)\nT(ACC)\n\n// 将 ACC 和存储值 COM 累加\nACC = COM + ACC\n\n// 将 ACC 储存进 COM\nC(ACC)\n\n// 将 ACC 传给下方 Process\nB(ACC)\n`,\n    '5':\n`// 将 ACC 输出(OUT B)\n// 参数缺省时，传递原始ACC值\nB()\n\n// 点击 右方 Next 或 Auto\n// 就可以顺利的运行啦\n// ヽ(≧Д≦)ノ\n`,\n    '3':\n`\n/*\n*********** 介绍 *************\n\n* 内置变量：ACC Next COM\n\n- NEXT  下一个值\n- ACC   当前值\n- COM   存储值\n\n* 内置方法：T B L R C\n\n- T B L R 四个方向的传输方法\n- C 设置 COM 存储值\n\n*****************************\n*/\n`,\n    '4':\n`/*\n*********** 规则 *************\n\n* ACC 有值时 Processor 才会执行\n\n* 每次执行 Next 覆盖 ACC\n\n* COM 只能通过方法C()存储\n\n* 所有 OUT 均等于 期望值则通关\n\n*****************************\n*/\n`,\n  }\n}\n","const missionCreater = () => {\n  const createMandom = () => ~~(Math.random() * 10)\n  let input = createMandom()\n  return {\n    input: input,\n    output: input * 2\n  }\n}\n\nexport default {\n  missionCreater,\n  intro: 'Mission 1：简单的乘法',\n  err: [3, 4],\n  cols: 3,\n  rows: 3,\n  size: 64,\n  entry: {\n    '0': {\n      pos: 'top'\n    }\n  },\n  export: {\n    '6': {\n      pos: 'bottom'\n    }\n  }\n}\n","const missionCreater = () => {\n  const createMandom = () => ~~(Math.random() * 3) - 1\n  let input = createMandom()\n  let output = input > 0 ? { 'A': 1, 'B': 0, 'C': 0 } : input === 0 ? { 'A': 0, 'B': 1, 'C': 0 } : { 'A': 0, 'B': 0, 'C': 1 }\n  return {\n    input: input,\n    output: output\n  }\n}\n\nexport default {\n  missionCreater,\n  intro: 'Mission 2：分类',\n  err: [],\n  size: 32,\n  cols: 3,\n  rows: 3,\n  isMultigroup: true,\n  entry: {\n    '1': {\n      pos: 'top'\n    }\n  },\n  export: {\n    '6': {\n      name: 'A',\n      pos: 'bottom'\n    },\n    '7': {\n      name: 'B',\n      pos: 'bottom'\n    },\n    '8': {\n      name: 'C',\n      pos: 'bottom'\n    }\n  }\n}\n","let NextA = 0\nlet NextB = 0\nconst missionCreater = () => {\n  const createMandom = () => ~~(Math.random() * 10)\n  let input = createMandom()\n  NextA += input\n  NextB = Math.abs(input - NextB)\n  return {\n    input: input,\n    output: {\n      A: NextA,\n      B: NextB\n    }\n  }\n}\n\nexport default {\n  missionCreater,\n  intro: 'Mission 3：累加 and 差值的绝对值',\n  err: [],\n  size: 64,\n  cols: 2,\n  rows: 2,\n  isMultigroup: true,\n  entry: {\n    '0': {\n      pos: 'top'\n    }\n  },\n  export: {\n    '2': {\n      name: 'A',\n      pos: 'bottom'\n    },\n    '3': {\n      name: 'B',\n      pos: 'bottom'\n    }\n  }\n}","import mission1 from './mission1'\nimport mission2 from './mission2'\nimport mission3 from './mission3'\nimport mission4 from './mission4'\n\nexport default [mission1, mission2, mission3, mission4]","import missions from './missions/index'\n\ntype TypePos = 'left' | 'right' | 'top' | 'bottom'\n\ninterface IGate {\n  [index: string]: {\n    name: string,\n    pos: TypePos\n  }\n}\n\nexport interface IMission {\n  intro: string,          // 关卡描述\n  err: number[],          // 不可用的Processor\n  cols: number,           // 列数\n  rows: number,           // 行数\n  size: number,           // 字节限制\n  isMultigroup: boolean,  // 是否多个输出口\n  entry: IGate,           // 入口信息\n  export: IGate,          // 出口信息\n  defaultTexts: any,       // 默认 Processor value\n  missionCreater: Function | null    // 生成关卡方法\n}\n\nconst initialState = {\n  intro: '',\n  err: [],\n  cols: 3,\n  rows: 3,\n  size: 64,\n  isMultigroup: false,\n  entry: {},\n  export: {},// 出口信息\n  defaultTexts: null,\n  missionCreater: null\n}\n\n/*  关卡生成器  */\nexport default {\n  initialState: <IMission> initialState,\n  missions: missions\n}\n","import Detector from './Detector'\nimport Processor from './Processor'\nimport Missions, { IMission } from './Missions'\n\n// 测试数据结构\nexport interface IData {\n  input: any,\n  output: any,\n  expectant_output: any,\n  result: string\n}\n\n// 游戏速度\nexport const GameSpeed = {\n  baseSpeed: 30,\n  minSpeed: 30,\n  level: 10\n}\n\n/*  Factory游戏对象  */\nexport default class Factory {\n  // 容器元素\n  elem: HTMLElement;\n  // 控制台元素\n  console: HTMLElement;\n  // 主体元素\n  container: HTMLElement;\n  // 控制面板元素\n  panel: HTMLElement;\n  // 控制台按钮面板元素\n  btnGroup: HTMLElement;\n  nextBtn: HTMLElement;\n  autoBtn: HTMLElement;\n  resetBtn: HTMLElement;\n  restartBtn: HTMLElement;\n  nextMissionBtn: HTMLElement | null;\n  // 消息面板\n  msgGroup: HTMLElement;\n  // 速度面板\n  speedGroup: HTMLElement;\n  speedDisplay: HTMLElement;\n  fastBtn: HTMLElement;\n  slowBtn: HTMLElement;\n  // 容器宽度\n  width: number;\n  // 容器高度\n  height: number;\n  // 是否运行中\n  inService: boolean = false;\n  // 关卡对象\n  Missions: IMission[];\n  // 当前关卡\n  mission: number = 0;\n  // 当前关卡对象\n  curMission: IMission;\n  // 测试总数\n  data_count: number = 20;\n  // 运行速度档次\n  speed: number = 5;\n  // 当前处理的处理器块\n  active: number = 0;\n  // 已通过测试数\n  test_active: number = 0;\n  // 测试总数\n  test_count: number = 2;\n  // 是否多组数据\n  isMultigroup: boolean;\n  // 检测器对象\n  detector: Detector;\n  // 测试数据数组\n  private _data: IData[] = [];\n  // 处理器对象数组\n  private _processors: Processor[];\n  // 事件队列\n  private _events: Function[] = [];\n  // 更新间隔\n  private _interval: number;\n  // 定时器\n  timer: any;\n  constructor (el: HTMLElement, options?: object) {\n    Object.assign(this, options)\n    this.elem = el\n    if (!this.elem) {\n      console.log('[Factory]: param el is the required.')\n      return\n    }\n\n    this.elem.classList.add('factory')\n    this.Missions = Missions\n    this.init()\n  }\n  /*  初始化  */\n  init () {\n    this.initSize()\n    this.getMissions()\n    this.initMission()\n    this.createContaner()\n    this.createConsole()\n    this.initProcessor()\n    this.createDetector()\n    this.createPanel()\n  }\n  /*  切换关卡  */\n  refresh () {\n    this.pause()\n    this.msgGroup.textContent = 'Code Mode'\n    this._data = []\n    this.active = 0\n    this.test_active = 0\n    this.inService = false\n\n    this.getMissions()\n    this.initMission()\n    this.initProcessor()\n    this.createDetector()\n  }\n  /*  销毁对象  */\n  destroy () {\n    this.elem.innerHTML = ''\n    this._data = []\n    this.active = 0\n    this.test_active = 0\n    this.inService = false\n    this.detector = null\n\n    while (this._events.length) {\n      ((<Function> this._events.shift()))()\n    }\n  }\n  /*  初始化容器大小  */\n  initSize () {\n    this.width = this.elem.offsetWidth\n    this.height = this.elem.offsetHeight\n  }\n  /*  生成检测器对象  */\n  createDetector () {\n    this.detector && this.detector.destroy()\n    this.detector = new Detector({\n      wrap: this.console,\n      isMultigroup: this.isMultigroup || false,\n      factory: this,\n      data: this._data\n    })\n  }\n  /*  生成游戏控制面板  */\n  createPanel () {\n    this.panel = document.createElement('DIV')\n    this.panel.className = 'factory-panel'\n\n    /*  控制台按钮面板  */\n    this.btnGroup = document.createElement('DIV')\n    this.btnGroup.className = 'factory-btn-group'\n    this.nextBtn = this.createBtn('Next', this.next, this.btnGroup)\n    this.autoBtn = this.createBtn('Auto', this.auto, this.btnGroup)\n    this.resetBtn = this.createBtn('Reset', this.reset, this.btnGroup)\n    this.restartBtn = this.createBtn('Restart', this.restart, this.btnGroup)\n\n    /*  消息面板  */\n    this.msgGroup = document.createElement('DIV')\n    this.msgGroup.className = 'factory-msg-group'\n    this.msgGroup.textContent = 'Code Mode'\n\n    /*  执行速度面板  */\n    this.speedGroup = document.createElement('DIV')\n    this.speedGroup.className = 'factory-speed-group'\n    this.slowBtn = this.createBtn('Slow', this.slow, this.speedGroup)\n    this.speedDisplay = document.createElement('DIV')\n    this.speedDisplay.className = 'factory-speed'\n    this.setSpeed(this.speed)\n    this.speedGroup.appendChild(this.speedDisplay)\n    this.fastBtn = this.createBtn('Fast', this.fast, this.speedGroup)\n\n    this.panel.appendChild(this.speedGroup)\n    this.panel.appendChild(this.btnGroup)\n    this.panel.appendChild(this.msgGroup)\n    this.console.appendChild(this.panel)\n  }\n  /*  设置速度  */\n  setSpeed (speed: number) {\n    this.speed = speed\n    this._interval = (GameSpeed.baseSpeed * GameSpeed.level + GameSpeed.minSpeed) - this.speed * GameSpeed.baseSpeed\n    this.speedDisplay.textContent = `Speed: ${this.speed}`\n    this.resetTimer()\n  }\n  /*  加快速度  */\n  fast () {\n    if (this.fastBtn.classList.contains('disabled'))\n      return false\n    this.speed === 1 && this.slowBtn.classList.remove('disabled')\n    this.setSpeed(this.speed + 1)\n    this.speed === 10 && this.fastBtn.classList.add('disabled')\n  }\n  /*  加快速度  */\n  slow () {\n    if (this.slowBtn.classList.contains('disabled'))\n      return false\n    this.speed === 10 && this.fastBtn.classList.remove('disabled')\n    this.setSpeed(this.speed - 1)\n    this.speed === 1 && this.slowBtn.classList.add('disabled')\n  }\n  /*  生成控制按钮  */\n  createBtn (name: string, fn: Function, wrap: HTMLElement): HTMLElement {\n    let btn = document.createElement('BUTTON')\n    btn.className = 'factory-panel-btn'\n    btn.textContent = name\n    fn = fn.bind(this)\n    btn.addEventListener('click', fn, false)\n    this._events.push(() => btn.removeEventListener('click', fn, false))\n    wrap.appendChild(btn)\n    return btn\n  }\n  /*  生成游戏主体容器  */\n  createContaner () {\n    this.container = document.createElement('DIV')\n    this.container.className = 'factory-container'\n    this.elem.appendChild(this.container)\n  }\n  /*  生成右侧控制台  */\n  createConsole () {\n    this.console = document.createElement('DIV')\n    this.console.className = 'factory-console'\n    this.elem.appendChild(this.console)\n  }\n  /*  得到关卡数据  */\n  getMissions () {\n    let status = this.Missions.missions[this.mission]\n    if (!status) {\n      alert('你已全部通关（撒花 ☆:✿.٩(๑❛ᴗ❛๑)۶°*✿')\n    } else {\n      this.isMultigroup = false\n      this.curMission = Object.assign({}, this.Missions.initialState, status)\n    }\n  }\n  /*  设置关卡  */\n  initMission () {\n    this.curMission.intro && this.elem.setAttribute('data-intro', this.curMission.intro)\n    this.elem.offsetWidth\n    for (let i = 0; i < this.data_count; i++) {\n      let d = this.curMission.missionCreater && this.curMission.missionCreater()\n      this._data.push({\n        input: d.input,\n        output: null,\n        expectant_output: d.output,\n        result: 'pending'\n      })\n    }\n  }\n  /*  初始化处理器  */\n  initProcessor () {\n    this._processors && Array.from(this._processors, (processor) => processor.destroy())\n    this._processors = []\n    for (let i = 0, total_num = this.curMission.cols * this.curMission.rows; i < total_num; i++) {\n      this._processors.push(new Processor({\n        width: `${~~(100 / this.curMission.cols)}%`,\n        height: `${~~(100 / this.curMission.rows)}%`,\n        status: this.curMission.err && this.curMission.err.indexOf(i) > -1 ? 'error' : 'idle',\n        size: this.curMission.size,\n        wrap: this.container,\n        defaultText: this.curMission.defaultTexts && this.curMission.defaultTexts[i],\n        factory: this,\n        index: i\n      }))\n    }\n    Array.from(this._processors, (processor: Processor, i: number) => {\n      processor.leftProcessor =  i % this.curMission.cols ? (this._processors[i - 1] || null) : null\n      processor.rightProcessor = (i + 1) % this.curMission.cols ? (this._processors[i + 1] || null) : null\n      processor.topProcessor = this._processors[i - this.curMission.cols] || null\n      processor.bottomProcessor = this._processors[i + this.curMission.cols] || null\n\n      if (this.curMission.entry[i]) {\n        processor.setPort(this.curMission.entry[i], 'entry')\n      }\n      if (this.curMission.export[i]) {\n        processor.setPort(this.curMission.export[i], 'export')\n      }\n    })\n  }\n  /*  运行中禁止代码输入  */\n  unableCodeInput (bool?: boolean): void {\n    /*  分别执行  */\n    Array.from(this._processors, (processor) => {\n      bool ? processor.code.setAttribute('disabled', true) : processor.code.removeAttribute('disabled')\n    })\n  }\n  /*  游戏开始  */\n  auto () {\n    if (this.timer)\n      return this.pause()\n\n    this.autoBtn.textContent = 'pause'\n    this.autoBtn.classList.add('active')\n    this.timer = setInterval(() => {\n      this.next()\n    }, this._interval)\n  }\n  resetTimer () {\n    if (!this.timer) {\n      return false\n    }\n    this.next()\n    clearInterval(this.timer)\n    this.timer = null\n    this.timer = setInterval(() => {\n      this.next()\n    }, this._interval)\n  }\n  /*  游戏暂停  */\n  pause () {\n    this.autoBtn.textContent = 'Auto'\n    this.autoBtn.classList.remove('active')\n    clearInterval(this.timer)\n    this.timer = null\n  }\n  /*  关卡结束  */\n  end () {\n    if (this.detector.success_count === this._data.length) {\n      if (this.test_active === this.test_count) {\n        this.pause()\n        this.msgGroup.textContent = '你通关了, 点GO进入下一关:)'\n        if (!this.nextMissionBtn) {\n          this.nextMissionBtn = this.createBtn('Go', this.nextMission, this.btnGroup)\n        }\n      } else {\n        this.createDetector()\n        this.test_active++\n        this.active = 0\n        this.detector.success_count = 0\n        this.msgGroup.textContent = `Running Mode：已通过测试（${this.test_active}/${this.test_count + 1}）`\n        Array.from(this._processors, (processor) => processor.setCom(null))\n      }\n    } else {\n      this.pause()\n      this.msgGroup.textContent = `出错了${this._data.length - this.detector.success_count}个, 点击Reset再改改`\n    }\n  }\n  /*  下一关  */\n  nextMission () {\n    this.mission = this.mission + 1\n    this.refresh()\n\n    let unbindFn = <Function> this._events.pop()\n    unbindFn.apply(this)\n    this.nextMissionBtn && this.btnGroup.removeChild(this.nextMissionBtn)\n    this.nextMissionBtn = null\n  }\n  /*  关卡重置  */\n  restart () {\n    return this.refresh()\n  }\n  /*  运行重置  */\n  reset () {\n    this.active = 0\n    this.test_active = 0\n    this.inService = false\n    this.unableCodeInput(false)\n    this.detector.reset()\n    this.msgGroup.textContent = 'Code Mode'\n    Array.from(this._processors, (processor: Processor) => {\n      processor._NEXT = ''\n      processor.setCom(null)\n      processor.resetACC()\n    })\n  }\n  /*  执行下一步  */\n  next () {\n    if (this.active < this._data.length) {\n      this.detector.setInputActive(this.active)\n      this.getNext()\n      if (!this.inService) {\n        this.inService = true\n        this.msgGroup.textContent = 'Running Mode'\n        this.unableCodeInput(true)\n      }\n      this.active++\n    } else {\n      this.detector.setInputActive()\n    }\n\n    /*  全部重置值  */\n    Array.from(this._processors, (processor) => {\n      processor.resetACC()\n    })\n\n    this.getNext()\n\n    /*  分别执行  */\n    Array.from(this._processors, (processor) => {\n      processor.next()\n    })\n\n    /*  判断是否全部停滞  */\n    !this._processors.some((processor) => processor.status === 'run') && this.end()\n  }\n  /*  入口得到Next值  */\n  getNext () {\n    for (let key in this.curMission.entry) {\n      this._data[this.active] && this._processors[key].setNext(this._data[this.active].input)\n    }\n  }\n}","import '../styles/index.scss'\nimport Factory from './modules/Factory'\n\nlet game: Factory = new Factory(<HTMLElement> document.getElementById('app'))\nconsole.log(game)\n"],"names":["options","assign","init","last_output","success_count","createDetector","initIems","render","wrap","removeChild","elem","setActive","input_group","isMultigroup","key","output_group","output_cgroup","from","items","obj","output","i","output_el","textContent","className","document","createElement","createGroup","data","expectant_output","el","expect_cgroup","createChildGroup","exports","appendChild","expect_group","firstChild","insertBefore","name","innerHTML","value","index","JSON","stringify","setAttribute","Array","Object","createItem","input","val","push","active","querySelector","classList","remove","add","length","exp","mObj","examine","isDiff","a","b","prototype","toString","call","isArray","some","v","keys","asyncSize","bind","closeError","code","addEventListener","removeEventListener","ports","createProcessor","bindEvent","processWrap","unbindEvent","style","cssText","width","height","status","setError","createCode","displayArea","createDisplayArea","err","factory","pause","contains","textarea","defaultText","removeAttribute","displayNEXT","_NEXT","displayACC","_ACC","displayCOM","_COM","displayStatus","displaySize","cur_size","size","value_elem","e","target","formatted_val","match","getByteLen","str","n","ch","test","len","portProcessor","Processor","setNext","type","detector","formatVal","isEnd","executeCode","setStatus","fn","context","__ERROR__","withCode","Function","_context","error","transmitACC","leftProcessor","rightProcessor","topProcessor","bottomProcessor","setCom","setCodeError","pos","createPortElem","reversePos","direction","total","missionCreater","createMandom","Math","random","NextA","NextB","abs","mission1","mission2","mission3","mission4","initialState","missions","GameSpeed","log","Missions","initSize","getMissions","initMission","createContaner","createConsole","initProcessor","createPanel","msgGroup","_data","test_active","inService","_events","shift","offsetWidth","offsetHeight","destroy","Detector","console","panel","btnGroup","nextBtn","createBtn","next","autoBtn","auto","resetBtn","reset","restartBtn","restart","speedGroup","slowBtn","slow","speedDisplay","setSpeed","speed","fastBtn","fast","_interval","baseSpeed","level","minSpeed","resetTimer","btn","container","mission","curMission","intro","data_count","d","_processors","processor","total_num","cols","rows","indexOf","defaultTexts","entry","setPort","export","bool","timer","setInterval","test_count","nextMissionBtn","nextMission","refresh","unbindFn","pop","apply","unableCodeInput","resetACC","setInputActive","getNext","end","game","Factory","getElementById"],"mappings":"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"}